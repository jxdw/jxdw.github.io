<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
    

    

    



    <meta charset="utf-8">
    
    
    
    
    <title>【转载】rabbitmq手册之rabbitmqctl | 思路比试错更重要 | 记录技术的学习和实践过程</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="rabbitmq,中间件技术">
    <meta name="description" content="原文地址https://www.jianshu.com/p/61a90fba1d2a application相关命令(集群管理的基础)rabbitmqctl stop [{pid_file}]rabbitmqctl stop 或者 rabbitmqctl stop[{pid_file}]表示stop 在RabbitMQ服务器上运行的一个Erlang节点，可以指定某一个 *pid_file*，表示会">
<meta name="keywords" content="rabbitmq,中间件技术">
<meta property="og:type" content="article">
<meta property="og:title" content="【转载】rabbitmq手册之rabbitmqctl">
<meta property="og:url" content="https://youxia999.github.io/2017/12/22/rabbitmqctl-handbook/index.html">
<meta property="og:site_name" content="思路比试错更重要">
<meta property="og:description" content="原文地址https://www.jianshu.com/p/61a90fba1d2a application相关命令(集群管理的基础)rabbitmqctl stop [{pid_file}]rabbitmqctl stop 或者 rabbitmqctl stop[{pid_file}]表示stop 在RabbitMQ服务器上运行的一个Erlang节点，可以指定某一个 *pid_file*，表示会">
<meta property="og:locale" content="ZH_CN">
<meta property="og:image" content="https://youxia999.github.io/img/rabbitmq/rabbitmq_startapp_status.png">
<meta property="og:image" content="https://youxia999.github.io/img/rabbitmq/rabbitmq_stopapp_status.png">
<meta property="og:updated_time" content="2020-02-06T04:16:21.829Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="【转载】rabbitmq手册之rabbitmqctl">
<meta name="twitter:description" content="原文地址https://www.jianshu.com/p/61a90fba1d2a application相关命令(集群管理的基础)rabbitmqctl stop [{pid_file}]rabbitmqctl stop 或者 rabbitmqctl stop[{pid_file}]表示stop 在RabbitMQ服务器上运行的一个Erlang节点，可以指定某一个 *pid_file*，表示会">
<meta name="twitter:image" content="https://youxia999.github.io/img/rabbitmq/rabbitmq_startapp_status.png">
    
        <link rel="alternate" type="application/atom+xml" title="思路比试错更重要" href="/atom.xml">
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="/css/style.css?v=1.7.2">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">游侠</h5>
          <a href="mailto:jingzhouyouxia@gmail.com" title="jingzhouyouxia@gmail.com" class="mail">jingzhouyouxia@gmail.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                主页
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags/%E6%8A%80%E6%9C%AF%E5%B9%B3%E5%8F%B0%E5%AE%9E%E7%8E%B0/"  >
                <i class="icon icon-lg icon-cogs"></i>
                技术平台实现
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags/%E4%B8%9A%E5%8A%A1%E5%B9%B3%E5%8F%B0%E5%AE%9E%E7%8E%B0/"  >
                <i class="icon icon-lg icon-desktop"></i>
                业务平台实现
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags/DevOps%E5%B7%A5%E5%85%B7/"  >
                <i class="icon icon-lg icon-cloud"></i>
                DevOps工具
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags/%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%8A%80%E6%9C%AF/"  >
                <i class="icon icon-lg icon-envelope"></i>
                中间件技术
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%E6%8A%80%E6%9C%AF/"  >
                <i class="icon icon-lg icon-coffee"></i>
                编程语言技术
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/about"  >
                <i class="icon icon-lg icon-th-list"></i>
                关于
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">【转载】rabbitmq手册之rabbitmqctl</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="输入感兴趣的关键字">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">【转载】rabbitmq手册之rabbitmqctl</h1>
        <h5 class="subtitle">
            
                <time datetime="2017-12-22T11:52:16.000Z" itemprop="datePublished" class="page-time">
  2017-12-22 19:52:16
</time>


            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap post-toc-shrink" id="post-toc">
            <h4>目录</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#原文地址"><span class="post-toc-number">1.</span> <span class="post-toc-text">原文地址</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#application相关命令-集群管理的基础"><span class="post-toc-number">2.</span> <span class="post-toc-text">application相关命令(集群管理的基础)</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-stop-pid-file"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">rabbitmqctl stop [{pid_file}]</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-shutdown"><span class="post-toc-number">2.2.</span> <span class="post-toc-text">rabbitmqctl shutdown</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-stop-app"><span class="post-toc-number">2.3.</span> <span class="post-toc-text">rabbitmqctl stop_app</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-start-app"><span class="post-toc-number">2.4.</span> <span class="post-toc-text">rabbitmqctl start_app</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-wait-pid-file"><span class="post-toc-number">2.5.</span> <span class="post-toc-text">rabbitmqctl wait {pid_file}</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-reset"><span class="post-toc-number">2.6.</span> <span class="post-toc-text">rabbitmqctl reset</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-force-reset"><span class="post-toc-number">2.7.</span> <span class="post-toc-text">rabbitmqctl force_reset</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-rotate-logs-suffix"><span class="post-toc-number">2.8.</span> <span class="post-toc-text">rabbitmqctl rotate_logs {suffix}</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-hipe-compile-directory"><span class="post-toc-number">2.9.</span> <span class="post-toc-text">rabbitmqctl hipe_compile {directory}</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#cluster-management-集群管理"><span class="post-toc-number">3.</span> <span class="post-toc-text">cluster management(集群管理)</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-join-cluster-clusternode-–ram"><span class="post-toc-number">3.1.</span> <span class="post-toc-text">rabbitmqctl join_cluster {clusternode} [–ram]</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-cluster-status"><span class="post-toc-number">3.2.</span> <span class="post-toc-text">rabbitmqctl cluster_status</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-change-cluster-node-type-disc-ram"><span class="post-toc-number">3.3.</span> <span class="post-toc-text">rabbitmqctl change_cluster_node_type {disc|ram}</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-forget-cluster-node-–offline"><span class="post-toc-number">3.4.</span> <span class="post-toc-text">rabbitmqctl forget_cluster_node [–offline]</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-rename-cluster-node-oldnode1-newnode1-oldnode2-newnode2…"><span class="post-toc-number">3.5.</span> <span class="post-toc-text">rabbitmqctl rename_cluster_node {oldnode1} {newnode1} [oldnode2] [newnode2…]</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-update-cluster-nodes-clusternode"><span class="post-toc-number">3.6.</span> <span class="post-toc-text">rabbitmqctl update_cluster_nodes {clusternode}</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-force-boot"><span class="post-toc-number">3.7.</span> <span class="post-toc-text">rabbitmqctl force_boot</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-sync-queue-p-vhost-queue"><span class="post-toc-number">3.8.</span> <span class="post-toc-text">rabbitmqctl sync_queue [-p vhost] {queue}</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-cancel-sync-queue-p-vhost-queue"><span class="post-toc-number">3.9.</span> <span class="post-toc-text">rabbitmqctl cancel_sync_queue [-p vhost] {queue}</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-purge-queue-p-vhost-queue"><span class="post-toc-number">3.10.</span> <span class="post-toc-text">rabbitmqctl purge_queue [-p vhost] {queue}</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-set-cluster-name-name"><span class="post-toc-number">3.11.</span> <span class="post-toc-text">rabbitmqctl set_cluster_name {name}</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#User-management-用户和角色管理"><span class="post-toc-number">4.</span> <span class="post-toc-text">User management(用户和角色管理)</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#用户角色"><span class="post-toc-number">4.1.</span> <span class="post-toc-text">用户角色</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-add-user-username-password"><span class="post-toc-number">4.2.</span> <span class="post-toc-text">rabbitmqctl add_user {username} {password}</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-delete-user-username"><span class="post-toc-number">4.3.</span> <span class="post-toc-text">rabbitmqctl delete_user {username}</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-change-password-username-newpassword"><span class="post-toc-number">4.4.</span> <span class="post-toc-text">rabbitmqctl change_password {username} {newpassword}</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-clear-password-username"><span class="post-toc-number">4.5.</span> <span class="post-toc-text">rabbitmqctl clear_password {username}</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-authenticate-user-username-password"><span class="post-toc-number">4.6.</span> <span class="post-toc-text">rabbitmqctl authenticate_user {username} {password}</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-set-user-tags-username-tag-…"><span class="post-toc-number">4.7.</span> <span class="post-toc-text">rabbitmqctl set_user_tags {username} {tag …}</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-list-users"><span class="post-toc-number">4.8.</span> <span class="post-toc-text">rabbitmqctl list_users</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-add-user-username-password-1"><span class="post-toc-number">4.9.</span> <span class="post-toc-text">rabbitmqctl add_user {username} {password}</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-set-user-tags-username-role"><span class="post-toc-number">4.10.</span> <span class="post-toc-text">rabbitmqctl set_user_tags {username} {role}</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-change-password-username-newpassword-1"><span class="post-toc-number">4.11.</span> <span class="post-toc-text">rabbitmqctl change_password {username} {newpassword}</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-clear-password-username-1"><span class="post-toc-number">4.12.</span> <span class="post-toc-text">rabbitmqctl clear_password {username}</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmq-delete-user-jshan"><span class="post-toc-number">4.13.</span> <span class="post-toc-text">rabbitmq delete_user jshan</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Access-control-访问控制"><span class="post-toc-number">5.</span> <span class="post-toc-text">Access control(访问控制)</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-add-vhost-vhost"><span class="post-toc-number">5.1.</span> <span class="post-toc-text">rabbitmqctl add_vhost {vhost}</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-delete-vhost-vhost"><span class="post-toc-number">5.2.</span> <span class="post-toc-text">rabbitmqctl delete_vhost {vhost}</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-list-vhosts-vhostinfoitem-…"><span class="post-toc-number">5.3.</span> <span class="post-toc-text">rabbitmqctl list_vhosts {vhostinfoitem …}</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-set-permissions-p-vhost-user-conf-write-read"><span class="post-toc-number">5.4.</span> <span class="post-toc-text">rabbitmqctl set_permissions [-p vhost] {user} {conf} {write} {read}</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-clear-permissions-p-vhost-username"><span class="post-toc-number">5.5.</span> <span class="post-toc-text">rabbitmqctl clear_permissions [-p vhost] {username}</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-list-permissions-p-vhost"><span class="post-toc-number">5.6.</span> <span class="post-toc-text">rabbitmqctl list_permissions [-p vhost]</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-list-user-permissions-username"><span class="post-toc-number">5.7.</span> <span class="post-toc-text">rabbitmqctl list_user_permissions {username}</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Parameter-Management-参数管理"><span class="post-toc-number">6.</span> <span class="post-toc-text">Parameter Management(参数管理)</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-set-parameter-p-vhost-component-name-name-value"><span class="post-toc-number">6.1.</span> <span class="post-toc-text">rabbitmqctl set_parameter [-p vhost] {component_name} {name} {value}</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-set-parameter-federation-local-username-‘“guest”‘"><span class="post-toc-number">6.2.</span> <span class="post-toc-text">rabbitmqctl set_parameter federation local_username ‘“guest”‘</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-clear-parameter-p-vhost-component-name-key"><span class="post-toc-number">6.3.</span> <span class="post-toc-text">rabbitmqctl clear_parameter [-p vhost] {component_name} {key}</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-list-parameters-p-vhost"><span class="post-toc-number">6.4.</span> <span class="post-toc-text">rabbitmqctl list_parameters [-p vhost]</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-set-global-parameter-name-value"><span class="post-toc-number">6.5.</span> <span class="post-toc-text">rabbitmqctl set_global_parameter {name} {value}</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-clear-global-parameter-name"><span class="post-toc-number">6.6.</span> <span class="post-toc-text">rabbitmqctl clear_global_parameter {name}</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-list-global-parameters"><span class="post-toc-number">6.7.</span> <span class="post-toc-text">rabbitmqctl list_global_parameters</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Policy-Management-策略管理"><span class="post-toc-number">7.</span> <span class="post-toc-text">Policy Management(策略管理)</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-set-policy-p-vhost-–priority-priority-–apply-to-apply-to-name-pattern-definition"><span class="post-toc-number">7.1.</span> <span class="post-toc-text">rabbitmqctl set_policy [-p vhost] [–priority priority] [–apply-to apply-to] {name} {pattern} {definition}</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-clear-policy-p-vhost-name"><span class="post-toc-number">7.2.</span> <span class="post-toc-text">rabbitmqctl clear_policy [-p vhost] {name}</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-list-policies-p-vhost"><span class="post-toc-number">7.3.</span> <span class="post-toc-text">rabbitmqctl list_policies [-p vhost]</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Server-Status-服务状态"><span class="post-toc-number">8.</span> <span class="post-toc-text">Server Status(服务状态)</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-list-queues-p-vhost-–offline-–online-–local-queueinfoitem-…"><span class="post-toc-number">8.1.</span> <span class="post-toc-text">rabbitmqctl list_queues [-p vhost] [[–offline] | [–online] | [–local]] [queueinfoitem …]</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-list-exchanges-p-vhost-exchangeinfoitem-…"><span class="post-toc-number">8.2.</span> <span class="post-toc-text">rabbitmqctl list_exchanges [-p vhost] [exchangeinfoitem …]</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-list-bindings-p-vhost-bindinginfoitem-…"><span class="post-toc-number">8.3.</span> <span class="post-toc-text">rabbitmqctl list_bindings [-p vhost] [bindinginfoitem …]</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-list-connections-connectioninfoitem-…"><span class="post-toc-number">8.4.</span> <span class="post-toc-text">rabbitmqctl list_connections [connectioninfoitem …]</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-list-channels-channelinfoitem-…"><span class="post-toc-number">8.5.</span> <span class="post-toc-text">rabbitmqctl list_channels [channelinfoitem …]</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-list-consumers-p-vhost"><span class="post-toc-number">8.6.</span> <span class="post-toc-text">rabbitmqctl list_consumers [-p vhost]</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-status"><span class="post-toc-number">8.7.</span> <span class="post-toc-text">rabbitmqctl status</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-node-health-check"><span class="post-toc-number">8.8.</span> <span class="post-toc-text">rabbitmqctl node_health_check</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-environment"><span class="post-toc-number">8.9.</span> <span class="post-toc-text">rabbitmqctl environment</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-report"><span class="post-toc-number">8.10.</span> <span class="post-toc-text">rabbitmqctl report</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-eval-expr"><span class="post-toc-number">8.11.</span> <span class="post-toc-text">rabbitmqctl eval {expr}</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Miscellaneous-繁杂"><span class="post-toc-number">9.</span> <span class="post-toc-text">Miscellaneous(繁杂)</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-close-connection-connectionpid-explanation"><span class="post-toc-number">9.1.</span> <span class="post-toc-text">rabbitmqctl close_connection {connectionpid} {explanation}</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-trace-on-p-vhost"><span class="post-toc-number">9.2.</span> <span class="post-toc-text">rabbitmqctl trace_on [-p vhost]</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-trace-off-p-vhost"><span class="post-toc-number">9.3.</span> <span class="post-toc-text">rabbitmqctl trace_off [-p vhost]</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-set-vm-memory-high-watermark-fraction"><span class="post-toc-number">9.4.</span> <span class="post-toc-text">rabbitmqctl set_vm_memory_high_watermark {fraction}</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-set-vm-memory-high-watermark-absolute-memory-limit"><span class="post-toc-number">9.5.</span> <span class="post-toc-text">rabbitmqctl set_vm_memory_high_watermark absolute {memory_limit}</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-set-disk-free-limit-disk-limit"><span class="post-toc-number">9.6.</span> <span class="post-toc-text">rabbitmqctl set_disk_free_limit {disk_limit}</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-set-disk-free-limit-mem-relative-fraction"><span class="post-toc-number">9.7.</span> <span class="post-toc-text">rabbitmqctl set_disk_free_limit mem_relative {fraction}</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#rabbitmqctl-encode-–decode-value-passphrase-–list-ciphers-–list-hashes-–cipher-cipher-–hash-hash-–iterations-iteraions"><span class="post-toc-number">9.8.</span> <span class="post-toc-text">rabbitmqctl encode [–decode] [value] [passphrase] [–list-ciphers] [–list-hashes] [–cipher cipher] [–hash hash] [–iterations iteraions]</span></a></li></ol></li></ol>
        </nav>
    </aside>


<article id="post-rabbitmqctl-handbook"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">【转载】rabbitmq手册之rabbitmqctl</h1>
        <div class="post-meta">
            <time class="post-time" title="2017-12-22 19:52:16 19:52:16" datetime="2017-12-22T11:52:16.000Z"  itemprop="datePublished">2017-12-22 19:52:16</time>

            


            
<span id="busuanzi_container_page_pv" title="文章总阅读量" style='display:none'>
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span>


        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <h1 id="原文地址"><a href="#原文地址" class="headerlink" title="原文地址"></a>原文地址</h1><p><a href="https://www.jianshu.com/p/61a90fba1d2a" target="_blank" rel="noopener">https://www.jianshu.com/p/61a90fba1d2a</a></p>
<h1 id="application相关命令-集群管理的基础"><a href="#application相关命令-集群管理的基础" class="headerlink" title="application相关命令(集群管理的基础)"></a>application相关命令(集群管理的基础)</h1><h2 id="rabbitmqctl-stop-pid-file"><a href="#rabbitmqctl-stop-pid-file" class="headerlink" title="rabbitmqctl stop [{pid_file}]"></a>rabbitmqctl stop [{pid_file}]</h2><p>rabbitmqctl stop 或者 rabbitmqctl stop[{pid_file}]<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">表示stop 在RabbitMQ服务器上运行的一个Erlang节点，可以指定某一个 *pid_file*，表示会等待这个指定的程序结束</span><br></pre></td></tr></table></figure></p>
<h2 id="rabbitmqctl-shutdown"><a href="#rabbitmqctl-shutdown" class="headerlink" title="rabbitmqctl shutdown"></a>rabbitmqctl shutdown</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">表示终止RabbitMQ 服务器上的Erlang进程，如果终止失败，会返回非零数字</span><br></pre></td></tr></table></figure>
<h2 id="rabbitmqctl-stop-app"><a href="#rabbitmqctl-stop-app" class="headerlink" title="rabbitmqctl stop_app"></a>rabbitmqctl stop_app</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">表示终止RabbitMQ的应用，但是Erlang节点还在运行。该命令典型的运行在一些需要RabbitMQ应用被停止的管理行为之前，例如 reset</span><br></pre></td></tr></table></figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://youxia999.github.io/img/rabbitmq/rabbitmq_startapp_status.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://youxia999.github.io/img/rabbitmq/rabbitmq_stopapp_status.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>
<h2 id="rabbitmqctl-start-app"><a href="#rabbitmqctl-start-app" class="headerlink" title="rabbitmqctl start_app"></a>rabbitmqctl start_app</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">表示启动RabbitMQ的应用。该命令典型的运行在一些需要RabbitMQ应用被停止的管理行为之后，例如 reset</span><br></pre></td></tr></table></figure>
<h2 id="rabbitmqctl-wait-pid-file"><a href="#rabbitmqctl-wait-pid-file" class="headerlink" title="rabbitmqctl wait {pid_file}"></a>rabbitmqctl wait {pid_file}</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">表示等待RabbitMQ应用启动。该命令会等待指定的pid file被创建，也就是启动的进程对应的pid保存在这个文件中，然后RabbitMQ应用在这个进程中启动。如果该进程终止，没有启动RabbitMQ应用，就会返回错误。</span><br><span class="line">合适的pid file是有rabbitmq-server 脚本创建的，默认保存在 Mnesia 目录下，可以通过修改 RABBITMQ_PID_FILE 环境变量来修改例如 rabbitmqctl wait /var/run/rabbitmq/pid</span><br></pre></td></tr></table></figure>
<h2 id="rabbitmqctl-reset"><a href="#rabbitmqctl-reset" class="headerlink" title="rabbitmqctl reset"></a>rabbitmqctl reset</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">表示设置RabbitMQ节点为原始状态。会从该节点所属的cluster中都删除，从管理数据库中删除所有数据，例如配置的用户和vhost，还会删除所有的持久消息。要想reset和force_reset操作执行成功，RabbitMQ应用需要处于停止状态，即执行过 stop_app</span><br></pre></td></tr></table></figure>
<h2 id="rabbitmqctl-force-reset"><a href="#rabbitmqctl-force-reset" class="headerlink" title="rabbitmqctl force_reset"></a>rabbitmqctl force_reset</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">表示强制性地设置RabbitMQ节点为原始状态。它和reset的区别在于，可以忽略目前管理数据库的状态和cluster的配置，无条件的reset。</span><br><span class="line">该方法的使用，应当用在当数据库或者cluster配置损坏的情况下作为最后的方法。</span><br></pre></td></tr></table></figure>
<h2 id="rabbitmqctl-rotate-logs-suffix"><a href="#rabbitmqctl-rotate-logs-suffix" class="headerlink" title="rabbitmqctl rotate_logs {suffix}"></a>rabbitmqctl rotate_logs {suffix}</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">表示将日志文件的内容追加到新的日志文件中去，这个新的日志文件的文件名是原有的日志文件名加上命令中的 suffix，并且恢复日志到原来位置的新文件中。</span><br><span class="line">注意：如果新文件原先不存在，那么会新建一个；如果suffix为空，那么不会发生日志转移，只是重新打开了一次日志文件而已。</span><br></pre></td></tr></table></figure>
<h2 id="rabbitmqctl-hipe-compile-directory"><a href="#rabbitmqctl-hipe-compile-directory" class="headerlink" title="rabbitmqctl hipe_compile {directory}"></a>rabbitmqctl hipe_compile {directory}</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">表示在指定的目录下执行HiPE编译和缓存结果文件 .beam-files</span><br><span class="line">如果需要父目录会被创建。并且在编译之前，该目录下的所有 .beam-files会被自动删除。</span><br><span class="line">使用预编译的文件，你应该设置 RABBITMQ_SERVER_CODE_PATH 环境变量为 hipe_compile 调用指定的目录。</span><br></pre></td></tr></table></figure>
<h1 id="cluster-management-集群管理"><a href="#cluster-management-集群管理" class="headerlink" title="cluster management(集群管理)"></a>cluster management(集群管理)</h1><h2 id="rabbitmqctl-join-cluster-clusternode-–ram"><a href="#rabbitmqctl-join-cluster-clusternode-–ram" class="headerlink" title="rabbitmqctl join_cluster {clusternode} [–ram]"></a>rabbitmqctl join_cluster {clusternode} [–ram]</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">表示结合到指定的集群，如果有参数 --ram 表示作为RAM节点结合到该集群中。</span><br><span class="line">该命令指令本节结合到指定的集群中，在结合之前，该节点需要reset，所以在使用时，需要格外注意。为了成功运行本命令，必须要停止RabbitMQ应用，例如 stop_app</span><br><span class="line">集群节点有两种类型: disc 和 RAM。disc类型，复制数据在RAM和disc上，在节点失效的情况下，提供了冗余保证，也能从一些全局事件中恢复，例如所有节点失效。</span><br><span class="line">RAM类型，只复制数据在RAM上，主要表现在伸缩性上，特别是在管理资源（例如：增加删除队列，交换器，或者绑定）上表现突出。</span><br><span class="line">一个集群必须至少含有一个disc节点，当通常都多余一个。通过该命令时，默认是设置为disc节点，如果需创建RAM节点，需要指定参数 --ram</span><br><span class="line">执行此命令之后，在该节点上启动的RabbitMQ应用，在该节点挂掉之后，会尝试连接节点所在集群中的其他节点。为了离开集群，可以 reset 该节点，也可以使用命令 forget_cluster_node 远程删除节点</span><br></pre></td></tr></table></figure>
<h2 id="rabbitmqctl-cluster-status"><a href="#rabbitmqctl-cluster-status" class="headerlink" title="rabbitmqctl cluster_status"></a>rabbitmqctl cluster_status</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">表示显示通过节点类型聚合在一起的集群中的所有节点，还有目前正在运行的节点</span><br></pre></td></tr></table></figure>
<h2 id="rabbitmqctl-change-cluster-node-type-disc-ram"><a href="#rabbitmqctl-change-cluster-node-type-disc-ram" class="headerlink" title="rabbitmqctl change_cluster_node_type {disc|ram}"></a>rabbitmqctl change_cluster_node_type {disc|ram}</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">表示改变集群节点的类型。该操作的正确执行，必定会停止该节点。并且在调整一个node为ram类型时，该节点不能为该集群的唯一node</span><br></pre></td></tr></table></figure>
<h2 id="rabbitmqctl-forget-cluster-node-–offline"><a href="#rabbitmqctl-forget-cluster-node-–offline" class="headerlink" title="rabbitmqctl forget_cluster_node [–offline]"></a>rabbitmqctl forget_cluster_node [–offline]</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">表示远程移除一个集群节点。要删除的节点必须脱机，如果没有脱机，需要使用 --offline 参数。</span><br><span class="line">当使用 --offline 参数时，rabbitmqctl不会去连接节点，而是暂时变成节点，以便进行变更。</span><br><span class="line">这在节点不能正常启动时非常有用。在这种情况下，节点会成为集群元数据的规范来源（例如哪些队列存在）。因此如果可以的话，应该使用此命令在最新的节点上关闭。</span><br><span class="line">--offline 参数使节点从脱机节点上移除。使用场景主要是在所有节点脱机，且最后一个节点无法联机时，从而防止整个集群启动。在其他情况不应该使用，否则会导致不一致。</span><br><span class="line">例如 rabbitmqctl -n hare@mcnulty forget_cluster_node  rabbit@stringer 上述命令将从节点 hare@mcnulty 中移除节点 rabbit@stringer</span><br></pre></td></tr></table></figure>
<h2 id="rabbitmqctl-rename-cluster-node-oldnode1-newnode1-oldnode2-newnode2…"><a href="#rabbitmqctl-rename-cluster-node-oldnode1-newnode1-oldnode2-newnode2…" class="headerlink" title="rabbitmqctl rename_cluster_node {oldnode1} {newnode1} [oldnode2] [newnode2…]"></a>rabbitmqctl rename_cluster_node {oldnode1} {newnode1} [oldnode2] [newnode2…]</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">表示在本地数据库上修改集群节点名称。该命令让rabbitmqctl暂时成为一个节点来做出做变更。因此，本地的待修改的集群节点一定要完全停止，其他节点可以是online或者offline</span><br></pre></td></tr></table></figure>
<h2 id="rabbitmqctl-update-cluster-nodes-clusternode"><a href="#rabbitmqctl-update-cluster-nodes-clusternode" class="headerlink" title="rabbitmqctl update_cluster_nodes {clusternode}"></a>rabbitmqctl update_cluster_nodes {clusternode}</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">表示指示已经集群的节点在唤醒时联系 &#123;clusternode&#125; 进行集群。这与 join_cluster 命令不同，因为它不加入任何集群，它是检查节点是否已经在具有 &#123;clusternode&#125; 的集群中。</span><br><span class="line">该命令的需求，是在当一个节点offline时，修改了集群节点的情形下。例如：节点A和B聚群，节点A offline了，节点C和B集群，并且B节点离开了该集群，那么当节点A起来的时候，A会尝试连接B，但是由于B节点已经不在该集群中，所以会失败。</span><br><span class="line">通过 update_cluster_nodes -n A C 将会解决上述问题。</span><br></pre></td></tr></table></figure>
<h2 id="rabbitmqctl-force-boot"><a href="#rabbitmqctl-force-boot" class="headerlink" title="rabbitmqctl force_boot"></a>rabbitmqctl force_boot</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">表示强制确保节点启动，即使该节点并不是最后down的。</span><br><span class="line">一般情况下，当你同时shut down了RabbitMQ集群时，第一个重启的节点应该是最后一个down掉的，因为它可能已经看到了其他节点发生的事情。但是有时候这并不可能：例如当整个集群lose power，那么该集群的所有节点会认为他们不是最后一个关闭的。</span><br><span class="line">如果最后down的节点永久的lost，那么应该优先使用 rabbitmqctl forget_cluster_node --offline ，因为这将确保在丢失节点上的镜像队列得到优先处理。</span><br></pre></td></tr></table></figure>
<h2 id="rabbitmqctl-sync-queue-p-vhost-queue"><a href="#rabbitmqctl-sync-queue-p-vhost-queue" class="headerlink" title="rabbitmqctl sync_queue [-p vhost] {queue}"></a>rabbitmqctl sync_queue [-p vhost] {queue}</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;queue&#125; 表示待同步的队列名称</span><br><span class="line">指引含有异步slaves的镜像队列去同步自身。当队列执行同步化时，其将会被锁定（指所有publishers发送出去的和consumers获取到的队列都会被锁定）。为了成功执行此命令，队列必须要被镜像。</span><br><span class="line">注意，排除消息的异步队列将最终被同步化，此命令主要运用于未被排除完全消息的队列。</span><br></pre></td></tr></table></figure>
<h2 id="rabbitmqctl-cancel-sync-queue-p-vhost-queue"><a href="#rabbitmqctl-cancel-sync-queue-p-vhost-queue" class="headerlink" title="rabbitmqctl cancel_sync_queue [-p vhost] {queue}"></a>rabbitmqctl cancel_sync_queue [-p vhost] {queue}</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">指引一个正在同步的镜像队列停止此操作。</span><br></pre></td></tr></table></figure>
<h2 id="rabbitmqctl-purge-queue-p-vhost-queue"><a href="#rabbitmqctl-purge-queue-p-vhost-queue" class="headerlink" title="rabbitmqctl purge_queue [-p vhost] {queue}"></a>rabbitmqctl purge_queue [-p vhost] {queue}</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;queue&#125; 表示待清空消息的队列名称</span><br><span class="line">该命令表示清空队列（即删除队列中的所有消息）</span><br></pre></td></tr></table></figure>
<h2 id="rabbitmqctl-set-cluster-name-name"><a href="#rabbitmqctl-set-cluster-name-name" class="headerlink" title="rabbitmqctl set_cluster_name {name}"></a>rabbitmqctl set_cluster_name {name}</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">设置集群的名称。在连接中，集群的名称被声明在客户端上，被同盟和插件用来记录一个消息所在的位置。集群的名称默认来自于集群中第一个节点的主机名，但是可以被修改。</span><br></pre></td></tr></table></figure>
<h1 id="User-management-用户和角色管理"><a href="#User-management-用户和角色管理" class="headerlink" title="User management(用户和角色管理)"></a>User management(用户和角色管理)</h1><h2 id="用户角色"><a href="#用户角色" class="headerlink" title="用户角色"></a>用户角色</h2><p>rabbitmq用户角色（role）分为五类： </p>
<ul>
<li>超级管理员（administrator）<br>administrator可登录管理控制台（启用management plugin的情况下），查看所有的信息，并且可以对用户、策略（policy）进行操作。</li>
<li>监控者（monitor）<br>monitoring可登录管理控制台（启用management plugin的情况下），同时可以查看rabbitmq节点的相关信息（进程数、内存使用情况，磁盘使用情况等）。</li>
<li>决策制定者（policymaker）<br>policymaker可以登录管理控制台（启用management plugin的情况下），同时可以对策略（policy）进行操作。</li>
<li>普通管理者（management）<br>management 仅可登录管理控制台（启用management plugin的情况下），无法看到节点信息，也无法对策略进行管理。</li>
<li>其他<br>无法登录管理控制台，通常就是普通的生产者和消费者。<br>注意，rabbitmqctl 管理 RabbitMQ 的内部用户数据库，所有其他后台需要认证的用户对于rabbitmqctl将不可见。</li>
</ul>
<h2 id="rabbitmqctl-add-user-username-password"><a href="#rabbitmqctl-add-user-username-password" class="headerlink" title="rabbitmqctl add_user {username} {password}"></a>rabbitmqctl add_user {username} {password}</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;username&#125; 表示用户名； ｛password｝表示用户密码</span><br><span class="line">该命令将创建一个 non-administrative 用户</span><br></pre></td></tr></table></figure>
<h2 id="rabbitmqctl-delete-user-username"><a href="#rabbitmqctl-delete-user-username" class="headerlink" title="rabbitmqctl delete_user {username}"></a>rabbitmqctl delete_user {username}</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">表示删除一个用户，该命令将指示RabbitMQ broker去删除指定的用户</span><br></pre></td></tr></table></figure>
<h2 id="rabbitmqctl-change-password-username-newpassword"><a href="#rabbitmqctl-change-password-username-newpassword" class="headerlink" title="rabbitmqctl change_password {username} {newpassword}"></a>rabbitmqctl change_password {username} {newpassword}</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">表示修改指定的用户的密码</span><br></pre></td></tr></table></figure>
<h2 id="rabbitmqctl-clear-password-username"><a href="#rabbitmqctl-clear-password-username" class="headerlink" title="rabbitmqctl clear_password {username}"></a>rabbitmqctl clear_password {username}</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">表示清除指定用户的密码</span><br><span class="line">执行此操作后的用户，将不能用密码登录，但是可能通过已经配置的SASL EXTERNAL的方式登录。</span><br></pre></td></tr></table></figure>
<h2 id="rabbitmqctl-authenticate-user-username-password"><a href="#rabbitmqctl-authenticate-user-username-password" class="headerlink" title="rabbitmqctl authenticate_user {username} {password}"></a>rabbitmqctl authenticate_user {username} {password}</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">表示指引RabbitMQ broker认证该用户和密码</span><br></pre></td></tr></table></figure>
<h2 id="rabbitmqctl-set-user-tags-username-tag-…"><a href="#rabbitmqctl-set-user-tags-username-tag-…" class="headerlink" title="rabbitmqctl set_user_tags {username} {tag …}"></a>rabbitmqctl set_user_tags {username} {tag …}</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">表示设置用户的角色，｛tag｝可以是零个，一个，或者是多个。并且已经存在的tag也将会被移除。</span><br><span class="line">rabbitmqctl set_user_tags tonyg administrator 该命令表示指示RabbitMQ broker确保用户tonyg为一个管理员角色。</span><br><span class="line">上述命令在用户通过AMQP方式登录时，不会有任何影响；但是如果通过其他方式，例如管理插件方式登录时，就可以去管理用户、vhost 和权限。</span><br></pre></td></tr></table></figure>
<h2 id="rabbitmqctl-list-users"><a href="#rabbitmqctl-list-users" class="headerlink" title="rabbitmqctl list_users"></a>rabbitmqctl list_users</h2><p>作用:查看用户信息<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">结果如下</span><br><span class="line">Listing users ...</span><br><span class="line">guest   [administrator]</span><br><span class="line">...done.</span><br></pre></td></tr></table></figure></p>
<h2 id="rabbitmqctl-add-user-username-password-1"><a href="#rabbitmqctl-add-user-username-password-1" class="headerlink" title="rabbitmqctl add_user {username} {password}"></a>rabbitmqctl add_user {username} {password}</h2><p>创建新用户<br>例子:rabbitmqctl add_user jshan 123456<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">结果如下，表示创建成功</span><br><span class="line">Creating user &quot;jshan&quot; ...</span><br><span class="line">...done.</span><br></pre></td></tr></table></figure></p>
<p>再次查询结果如下：<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Listing users ...</span><br><span class="line">guest   [administrator]</span><br><span class="line">jshan   []</span><br><span class="line">...done.</span><br></pre></td></tr></table></figure></p>
<p>上述结果中，第一列表示用户名，第二列表示用户角色</p>
<h2 id="rabbitmqctl-set-user-tags-username-role"><a href="#rabbitmqctl-set-user-tags-username-role" class="headerlink" title="rabbitmqctl set_user_tags {username} {role}"></a>rabbitmqctl set_user_tags {username} {role}</h2><p>作用:为用户设置用户角色<br>例子:rabbitmqctl set_user_tags jshan monitoring<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">结果如下，表示设置成功</span><br><span class="line">Setting tags for user &quot;jshan&quot; to [monitoring] ...</span><br><span class="line">...done.</span><br></pre></td></tr></table></figure></p>
<p>说明一下，执行该命令之后，会先删除该用户已有的角色，然后添加新的角色，可以填写多个角色，如果想删除某个用户的所有角色，可以设置如下：<br>rabbitmqctl set_user_tags {username}</p>
<h2 id="rabbitmqctl-change-password-username-newpassword-1"><a href="#rabbitmqctl-change-password-username-newpassword-1" class="headerlink" title="rabbitmqctl change_password {username} {newpassword}"></a>rabbitmqctl change_password {username} {newpassword}</h2><p>作用:修改用户密码<br>例子:rabbitmqctl change_password jshan 123<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">结果如下，表示修改成功</span><br><span class="line">Changing password for user &quot;jshan&quot; ...</span><br><span class="line">...done.</span><br></pre></td></tr></table></figure></p>
<h2 id="rabbitmqctl-clear-password-username-1"><a href="#rabbitmqctl-clear-password-username-1" class="headerlink" title="rabbitmqctl clear_password {username}"></a>rabbitmqctl clear_password {username}</h2><p>作用:清除用户密码<br>例子:rabbitmqctl clear_password jshan<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">结果如下，表示清除成功</span><br><span class="line">Clearing password for user &quot;jshan&quot; ...</span><br><span class="line">...done.</span><br><span class="line">说明一下，执行该命令之后，用户无法对该用户使用密码登录</span><br></pre></td></tr></table></figure></p>
<h2 id="rabbitmq-delete-user-jshan"><a href="#rabbitmq-delete-user-jshan" class="headerlink" title="rabbitmq delete_user jshan"></a>rabbitmq delete_user jshan</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">删除用户 rabbitmqctl delete_user &#123;username&#125;</span><br><span class="line">结果如下，表示删除成功</span><br><span class="line">Deleting user &quot;jshan&quot; ...</span><br><span class="line">...done.</span><br></pre></td></tr></table></figure>
<h1 id="Access-control-访问控制"><a href="#Access-control-访问控制" class="headerlink" title="Access control(访问控制)"></a>Access control(访问控制)</h1><p>注意，rabbitmqctl 管理 RabbitMQ 的内部用户数据库，所有其他后台需要认证的用户的权限对于rabbitmqctl将不可见。</p>
<h2 id="rabbitmqctl-add-vhost-vhost"><a href="#rabbitmqctl-add-vhost-vhost" class="headerlink" title="rabbitmqctl add_vhost {vhost}"></a>rabbitmqctl add_vhost {vhost}</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">｛vhost｝ 表示待创建的虚拟主机项的名称</span><br></pre></td></tr></table></figure>
<h2 id="rabbitmqctl-delete-vhost-vhost"><a href="#rabbitmqctl-delete-vhost-vhost" class="headerlink" title="rabbitmqctl delete_vhost {vhost}"></a>rabbitmqctl delete_vhost {vhost}</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">表示删除一个vhost。删除一个vhost将会删除该vhost的所有exchange、queue、binding、用户权限、参数和策略。</span><br></pre></td></tr></table></figure>
<h2 id="rabbitmqctl-list-vhosts-vhostinfoitem-…"><a href="#rabbitmqctl-list-vhosts-vhostinfoitem-…" class="headerlink" title="rabbitmqctl list_vhosts {vhostinfoitem …}"></a>rabbitmqctl list_vhosts {vhostinfoitem …}</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">表示列出所有的vhost。其中 &#123;vhostinfoitem&#125; 表示要展示的vhost的字段信息，展示的结果将按照 &#123;vhostinfoitem&#125; 指定的字段顺序展示。这些字段包括： name（名称） 和 tracing （是否为此vhost启动跟踪）。</span><br><span class="line">如果没有指定具体的字段项，那么将展示vhost的名称。</span><br></pre></td></tr></table></figure>
<h2 id="rabbitmqctl-set-permissions-p-vhost-user-conf-write-read"><a href="#rabbitmqctl-set-permissions-p-vhost-user-conf-write-read" class="headerlink" title="rabbitmqctl set_permissions [-p vhost] {user} {conf} {write} {read}"></a>rabbitmqctl set_permissions [-p vhost] {user} {conf} {write} {read}</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">表示设置用户权限。 &#123;vhost&#125; 表示待授权用户访问的vhost名称，默认为 &quot;/&quot;； &#123;user&#125; 表示待授权反问特定vhost的用户名称； &#123;conf&#125;表示待授权用户的配置权限，是一个匹配资源名称的正则表达式； &#123;write&#125; 表示待授权用户的写权限，是一个匹配资源名称的正则表达式； &#123;read&#125;表示待授权用户的读权限，是一个资源名称的正则表达式。</span><br><span class="line">rabbitmqctl set_permissions -p myvhost tonyg &quot;^tonyg-.*&quot; &quot;.*&quot; &quot;.*&quot;</span><br><span class="line">例如上面例子，表示授权给用户 &quot;tonyg&quot; 在vhost为 `myvhost` 下有资源名称以 &quot;tonyg-&quot; 开头的 配置权限；所有资源的写权限和读权限。</span><br></pre></td></tr></table></figure>
<h2 id="rabbitmqctl-clear-permissions-p-vhost-username"><a href="#rabbitmqctl-clear-permissions-p-vhost-username" class="headerlink" title="rabbitmqctl clear_permissions [-p vhost] {username}"></a>rabbitmqctl clear_permissions [-p vhost] {username}</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">表示设置用户拒绝访问指定指定的vhost，vhost默认值为 &quot;/&quot;</span><br></pre></td></tr></table></figure>
<h2 id="rabbitmqctl-list-permissions-p-vhost"><a href="#rabbitmqctl-list-permissions-p-vhost" class="headerlink" title="rabbitmqctl list_permissions [-p vhost]"></a>rabbitmqctl list_permissions [-p vhost]</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">表示列出具有权限访问指定vhost的所有用户、对vhost中的资源具有的操作权限。默认vhost为 &quot;/&quot;。</span><br><span class="line">注意，空字符串表示没有任何权限。</span><br></pre></td></tr></table></figure>
<h2 id="rabbitmqctl-list-user-permissions-username"><a href="#rabbitmqctl-list-user-permissions-username" class="headerlink" title="rabbitmqctl list_user_permissions {username}"></a>rabbitmqctl list_user_permissions {username}</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">表示列出指定用户的权限vhost，和在该vhost上的资源可操作权限。</span><br></pre></td></tr></table></figure>
<h1 id="Parameter-Management-参数管理"><a href="#Parameter-Management-参数管理" class="headerlink" title="Parameter Management(参数管理)"></a>Parameter Management(参数管理)</h1><p>RabbitMQ的一些特性（例如联合插件）是被动态的、集群范围内的参数控制。有两类参数：属于vhost的参数和全局参数。一个属于vhost的参数由三部分组成： 组件名称，参数名称和值。其中组件名称和名称是字符串，值是一个Erlang项。<br>一个全局参数由两部分组成： 参数名称和值。其中名称是字符串，值是一个Erlang项。参数可以被设置，删除，列出。参数的具体设置方法如下：</p>
<h2 id="rabbitmqctl-set-parameter-p-vhost-component-name-name-value"><a href="#rabbitmqctl-set-parameter-p-vhost-component-name-name-value" class="headerlink" title="rabbitmqctl set_parameter [-p vhost] {component_name} {name} {value}"></a>rabbitmqctl set_parameter [-p vhost] {component_name} {name} {value}</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">设置参数，｛component_name｝表示待设置参数的组件名称，&#123;name&#125; 表示待设置的参数名称，｛value｝表示待设置的参数值，是一个JSON项，在多数shell中，你很有可能要应用该值</span><br></pre></td></tr></table></figure>
<h2 id="rabbitmqctl-set-parameter-federation-local-username-‘“guest”‘"><a href="#rabbitmqctl-set-parameter-federation-local-username-‘“guest”‘" class="headerlink" title="rabbitmqctl set_parameter federation local_username ‘“guest”‘"></a>rabbitmqctl set_parameter federation local_username ‘“guest”‘</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">上述例子，表示设置默认vhost即 &quot;/&quot; 的 federation 组件的参数 local_username 的值设置为JSON项 &quot;guest&quot;</span><br></pre></td></tr></table></figure>
<h2 id="rabbitmqctl-clear-parameter-p-vhost-component-name-key"><a href="#rabbitmqctl-clear-parameter-p-vhost-component-name-key" class="headerlink" title="rabbitmqctl clear_parameter [-p vhost] {component_name} {key}"></a>rabbitmqctl clear_parameter [-p vhost] {component_name} {key}</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">表示清理一个参数，｛component_name｝表示待清理的组件名称，｛key｝表示待清理的参数名称</span><br><span class="line">rabbitmqctl clear_parameter federation local_username</span><br><span class="line">上述例子表示清理默认vhost上的组件 federation 的参数 local_username</span><br></pre></td></tr></table></figure>
<h2 id="rabbitmqctl-list-parameters-p-vhost"><a href="#rabbitmqctl-list-parameters-p-vhost" class="headerlink" title="rabbitmqctl list_parameters [-p vhost]"></a>rabbitmqctl list_parameters [-p vhost]</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">表示列举出指定的vhost上的所有参数</span><br></pre></td></tr></table></figure>
<h2 id="rabbitmqctl-set-global-parameter-name-value"><a href="#rabbitmqctl-set-global-parameter-name-value" class="headerlink" title="rabbitmqctl set_global_parameter {name} {value}"></a>rabbitmqctl set_global_parameter {name} {value}</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">设置一个全局运行时的变量，有些类似于 set_parameter ，但是此 key-value 对并不绑定于vhost。 </span><br><span class="line">rabbitmqctl set_global_parameter mqtt_default_vhosts &apos;&#123;&quot;O=client,CN=guest&quot;:&quot;/&quot;&#125;&apos;</span><br><span class="line">上述例子，设置一个全局运行时的参数 mqtt_default_vhosts 的值为一个JSON项， &#123;&quot;O=client,CN=guest&quot;:&quot;/&quot;&#125;</span><br></pre></td></tr></table></figure>
<h2 id="rabbitmqctl-clear-global-parameter-name"><a href="#rabbitmqctl-clear-global-parameter-name" class="headerlink" title="rabbitmqctl clear_global_parameter {name}"></a>rabbitmqctl clear_global_parameter {name}</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">清除一个全局运行时参数，类似于 clear_parameter，但是此 key-value 对并不绑定于vhost。</span><br><span class="line">rabbitmqctl clear_global_parameter mqtt_default_vhosts</span><br><span class="line">上述例子，清除一个全局运行时参数 mqtt_default_vhosts</span><br></pre></td></tr></table></figure>
<h2 id="rabbitmqctl-list-global-parameters"><a href="#rabbitmqctl-list-global-parameters" class="headerlink" title="rabbitmqctl list_global_parameters"></a>rabbitmqctl list_global_parameters</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">列出所有的全局运行时参数，类似于 list_parameters，但是该命令不绑定于任何vhost</span><br></pre></td></tr></table></figure>
<h1 id="Policy-Management-策略管理"><a href="#Policy-Management-策略管理" class="headerlink" title="Policy Management(策略管理)"></a>Policy Management(策略管理)</h1><h2 id="rabbitmqctl-set-policy-p-vhost-–priority-priority-–apply-to-apply-to-name-pattern-definition"><a href="#rabbitmqctl-set-policy-p-vhost-–priority-priority-–apply-to-apply-to-name-pattern-definition" class="headerlink" title="rabbitmqctl set_policy [-p vhost] [–priority priority] [–apply-to apply-to] {name} {pattern} {definition}"></a>rabbitmqctl set_policy [-p vhost] [–priority priority] [–apply-to apply-to] {name} {pattern} {definition}</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;name&#125; 表示策略名称；</span><br><span class="line">&#123;pattern&#125; 表示当匹配到给定资源的正则表达式，使的该策略得以应用； </span><br><span class="line">&#123;definition&#125; 表示策略的定义，作为一个JSON项，在多数shell中，你很可能需要去应用它</span><br><span class="line">&#123;priority&#125; 表示策略的优先级的整数，数据越大表示优先级越高，默认值为0</span><br><span class="line">&#123;apply_to&#125; 表示策略应该应用的类型： queues/exchange/all，默认值是 all</span><br></pre></td></tr></table></figure>
<h2 id="rabbitmqctl-clear-policy-p-vhost-name"><a href="#rabbitmqctl-clear-policy-p-vhost-name" class="headerlink" title="rabbitmqctl clear_policy [-p vhost] {name}"></a>rabbitmqctl clear_policy [-p vhost] {name}</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">表示清理一个策略。 &#123;name&#125; 表示待清理的策略名称</span><br></pre></td></tr></table></figure>
<h2 id="rabbitmqctl-list-policies-p-vhost"><a href="#rabbitmqctl-list-policies-p-vhost" class="headerlink" title="rabbitmqctl list_policies [-p vhost]"></a>rabbitmqctl list_policies [-p vhost]</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">表示列举出给定的vhost的所有策略信息</span><br></pre></td></tr></table></figure>
<h1 id="Server-Status-服务状态"><a href="#Server-Status-服务状态" class="headerlink" title="Server Status(服务状态)"></a>Server Status(服务状态)</h1><h2 id="rabbitmqctl-list-queues-p-vhost-–offline-–online-–local-queueinfoitem-…"><a href="#rabbitmqctl-list-queues-p-vhost-–offline-–online-–local-queueinfoitem-…" class="headerlink" title="rabbitmqctl list_queues [-p vhost] [[–offline] | [–online] | [–local]] [queueinfoitem …]"></a>rabbitmqctl list_queues [-p vhost] [[–offline] | [–online] | [–local]] [queueinfoitem …]</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">返回队列的详细信息。如果 &quot;-p&quot; 标志不存在，那么将返回默认虚拟主机的队列详细信息。&quot;-p&quot; 可以用来覆盖默认vhost。可以使用一下互斥选项之一，通过其状态或者位置过滤显示的队列。</span><br><span class="line">[--offline] 表示仅仅列出当前不可用的持久队列（更具体地说，他们的主节点不是）</span><br><span class="line">[--online] 表示列出当前可用的队列（他们的主节点是）</span><br><span class="line">[--local] 表示仅仅列出那些主程序在当前节点上的队列</span><br><span class="line">queueinfoitem参数用于指示要包括在结果中的哪些队列信息项。结果中的列顺序将与参数的顺序相匹配。queueinfoitem可以从以下列表中获取任何值：</span><br><span class="line">name 表示队列的名称</span><br><span class="line">durable 表示服务器重启之后，队列是否存活</span><br><span class="line">auto_delete 表示不再使用的队列是否自动被删除</span><br><span class="line">arguments 表示队列的参数</span><br><span class="line">policy 表示应用在队列中的策略名称</span><br><span class="line">pid 表示和队列相关联的Erlang进程的ID</span><br><span class="line">owner_pid 表示作为队列的排他所有者的连接的Erlang进程的ID，如果队列是非排他，则为空</span><br><span class="line">exclusive 表示队列是否是排他的，有 owner_pid 返回 True，否则返回 False</span><br><span class="line">exclusive_consumer_pid 表示排他消费者订阅该队列的频道的Erlang进程的ID，如果没有独家消费者，则为空</span><br><span class="line">exclusive_consumer_tag 表示订阅该队列的排他消费者的消费tag。如果没有排他消费者，则为空</span><br><span class="line">messages_ready 表示准备被发送到客户端的消息数量</span><br><span class="line">messages_unacknowledged 表示已经被发送到客户端但是还没有被确认的消息数量</span><br><span class="line">messages 表示准备发送和没有被确认的消息数量总和（队列深度）</span><br><span class="line">messages_ready_ram 表示驻留在 ram 里的 messages_ready 的消息数量</span><br><span class="line">messages_unacknowledged_ram 表示驻留在 ram 里的 messages_unacknowledged 的消息数量</span><br><span class="line">messages_ram 表示驻留在 ram 里的消息总数</span><br><span class="line">messages_persistent 表示队列中持久消息的总数（对于临时队列，总是为0）</span><br><span class="line">message_bytes 表示在队列中所有消息body的大小，这并不包括消息属性（包括header）或者任何开销</span><br><span class="line">message_bytes_ready 表示类似于 messge_bytes 但仅仅计算那些将发送到客户端的消息</span><br><span class="line">message_bytes_unacknowledged 表示类似于 message_bytes 但仅仅计算那些已经发送到客户还没有确认的消息</span><br><span class="line">message_bytes_ram 表示类似于 message_bytes 但仅仅计算那些驻留在ram中的消息</span><br><span class="line">message_bytes_persistent 表示类似于 message_bytes 但仅仅计算那些持久消息</span><br><span class="line">head_message_timestamp 表示队列中第一个消息的时间戳属性（如果存在）。只有处在 paged-in 状态的消息才存在时间戳。</span><br><span class="line">disk_reads 表示该队列自start起，从磁盘读取消息的次数总和</span><br><span class="line">disk_writes 表示该队列自start起，被写入磁盘消息的次数总和</span><br><span class="line">consumers 表示consumer的数量</span><br><span class="line">consumer_utilisation 表示队列能够立即将消息传递给消费者的时间分数（0.0 ~ 1.0之间），如果消费者受到网络拥塞或者预取计数的限制，该值可能小于1.0</span><br><span class="line">memory 表示和该队列相关联的Erlang进程消耗的内存字节数，包括stack/heap/内部数据结构</span><br><span class="line">slave_pids 表示该队列目前的slave的ID号（如果该队列被镜像的话）</span><br><span class="line">synchronised_slave_pids 表示如果队列被镜像，给出与主队列同步的当前slave的ID号，即可以从主队列接管而不丢失消息的slave的ID</span><br><span class="line">state 表示队列的状态，一般是 &quot;running&quot;； 如果队列正在同步，也可能是 &quot;&#123;syncing, MsgCount&#125;&quot;； 如果队列所处的节点当前down了，队列显示的状态为 &quot;down&quot;</span><br><span class="line">如果没有指定queueinfoitem，那么将显示队列的名称（name）和深度（messages）</span><br></pre></td></tr></table></figure>
<h2 id="rabbitmqctl-list-exchanges-p-vhost-exchangeinfoitem-…"><a href="#rabbitmqctl-list-exchanges-p-vhost-exchangeinfoitem-…" class="headerlink" title="rabbitmqctl list_exchanges [-p vhost] [exchangeinfoitem …]"></a>rabbitmqctl list_exchanges [-p vhost] [exchangeinfoitem …]</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">返回交换器的详细信息。如果 &quot;-p&quot; 标志不存在，那么将返回默认虚拟主机的交换器详细信息。&quot;-p&quot; 可以用来覆盖默认vhost。</span><br><span class="line">exchangeinfoitem参数用于指示要包括在结果中的哪些交换器信息项。结果中的列顺序将与参数的顺序相匹配。exchangeinfoitem可以从以下列表中获取任何值：</span><br><span class="line">name 表示交换器的名称</span><br><span class="line">type 表示交换器类型（例如： direct/topic/fanout/headers）</span><br><span class="line">durable 表示服务器重启之后，交换器是否存活</span><br><span class="line">auto_delete 表示交换器不再使用时，是否被自动删除</span><br><span class="line">internal 表示交换器是否是内部的，例如不能被客户端直接发布</span><br><span class="line">arguments 表示交换器的参数</span><br><span class="line">policy 表示引用在该交换器上的策略名称</span><br><span class="line">如果没有指定任何 exchangeinfoitem，那么该命令将显示交换器的名称（name）和类型（type）</span><br></pre></td></tr></table></figure>
<h2 id="rabbitmqctl-list-bindings-p-vhost-bindinginfoitem-…"><a href="#rabbitmqctl-list-bindings-p-vhost-bindinginfoitem-…" class="headerlink" title="rabbitmqctl list_bindings [-p vhost] [bindinginfoitem …]"></a>rabbitmqctl list_bindings [-p vhost] [bindinginfoitem …]</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">返回绑定的详细信息。如果 &quot;-p&quot; 标志不存在，那么将返回默认虚拟主机的绑定详细信息。&quot;-p&quot; 可以用来覆盖默认vhost。</span><br><span class="line">bindinginfoitem参数用于指示要包括在结果中的哪些绑定信息项。结果中的列顺序将与参数的顺序相匹配。bindinginfoitem可以从以下列表中获取任何值：</span><br><span class="line">source_name 表示绑定附加到的消息源的名称</span><br><span class="line">source_kind 表示绑定附加到的消息源的类型，目前通常交换器</span><br><span class="line">destination_name 表示附加绑定到的消息目的地的名称</span><br><span class="line">destination_kind 表示附加绑定到的消息目的地的类型</span><br><span class="line">routing_key 表示绑定的routing key</span><br><span class="line">arguments 表示绑定的参数</span><br><span class="line">如果没有指定任何的 bindinginfoitem ，那么将展示上述所有的参数</span><br><span class="line">rabbitmqctl list_bindings -p /myvhost exchange_name queue_name</span><br><span class="line">上述命令，表示展示在 /myvhost 虚拟主机中的绑定的exchange名称和queue名称</span><br></pre></td></tr></table></figure>
<h2 id="rabbitmqctl-list-connections-connectioninfoitem-…"><a href="#rabbitmqctl-list-connections-connectioninfoitem-…" class="headerlink" title="rabbitmqctl list_connections [connectioninfoitem …]"></a>rabbitmqctl list_connections [connectioninfoitem …]</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">返回TCP/IP连接统计信息</span><br><span class="line">connectioninfoitem 参数用于指示要包括在结果中的哪些连接信息项，结果中的列顺序将与参数的顺序相匹配。connectioninfoitem可以从以下列表中获取任何值：</span><br><span class="line">pid 表示与该connection相关联的Erlang进程的id号</span><br><span class="line">name 表示该连接的可读性名称</span><br><span class="line">port 表示服务端口</span><br><span class="line">host 表示通过反向DNS获取的服务器主机名，如果反向DNS失败或未启用，则为其IP地址</span><br><span class="line">peer_port 表示对等端口</span><br><span class="line">peer_host 表示通过反向DNS获取的对等主机名，如果反向DNS失败或未启用，则为其IP地址</span><br><span class="line">ssl 表示该连接是否使用SSL保护的bool值</span><br><span class="line">ssl_protocal 表示SSL协议(例如： tlsv1)</span><br><span class="line">ssl_key_exchange 表示SSL关键交换器算法（例如： rsa）</span><br><span class="line">ssl_cipher 表示SSL密码算法（例如： aes_256_cbc）</span><br><span class="line">ssl_hash 表示SSL哈希函数（例如： sha）</span><br><span class="line">peer_cert_issuer 表示对等体的SSL证书的颁发者，以RFC4514形式出现</span><br><span class="line">peer_cert_validity 表示对等体的SSL证书的有效期限</span><br><span class="line">state 表示连接状态（例如： starting/tuning/opening/running/flow/blocking/blocked/closing/closed）</span><br><span class="line">channels 表示正在使用连接的通道数量</span><br><span class="line">protocol 表示正在使用的AMQP的版本号。注意，如果一个客户端需要一个AMQP 0-9 连接，我们将其作为 AMQP 0-9-1</span><br><span class="line">auth_mechanism 表示使用SASL认证机制，如PLAN</span><br><span class="line">user 表示和该连接相关联的用户名</span><br><span class="line">vhost 表示vhost名称</span><br><span class="line">timeout 表示连接超时/协商心跳间隔，单位为秒</span><br><span class="line">frame_max 表示最大的frame大小（byte）</span><br><span class="line">channel_max 表示该连接上通道的最大数量</span><br><span class="line">client_properties 表示在连接建立期间，有客户端传送的消息属性</span><br><span class="line">recv_oct 表示接受到的八位字节</span><br><span class="line">recv_cnt 表示接受到的包</span><br><span class="line">send_oct 表示发送的八位字节</span><br><span class="line">send_cnt 表示发送的包</span><br><span class="line">send_pend 表示发送的队列大小</span><br><span class="line">connected_at 表示该连接被建立的日期和时间的时间戳格式</span><br><span class="line">如果没有指定任何connectioninfoitem，那么将展示：user/peer_host/peer_port/流量控制和内存块状态之后的时间</span><br></pre></td></tr></table></figure>
<h2 id="rabbitmqctl-list-channels-channelinfoitem-…"><a href="#rabbitmqctl-list-channels-channelinfoitem-…" class="headerlink" title="rabbitmqctl list_channels [channelinfoitem …]"></a>rabbitmqctl list_channels [channelinfoitem …]</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">返回所有当前的通道的信息，通道即一个执行大多数AMQP命令的逻辑容器。这包括由普通AMQP连接的一部分通道、由各种插件和其他扩展程序创建的通道。</span><br><span class="line">channelinfoitem 参数用于指示要包括在结果中的哪些连接信息项，结果中的列顺序将与参数的顺序相匹配。channelinfoitem 可以从以下列表中获取任何值：</span><br><span class="line">pid 表示与该连接相关联的Erlang程序的ID号</span><br><span class="line">connection 表示与通道所属连接相关联的Erlang进程的ID号</span><br><span class="line">name 表示通道的可读性名称</span><br><span class="line">number 表示通道的号码，在连接中唯一表示它</span><br><span class="line">user 表示和该通道相关联的用户名</span><br><span class="line">vhost 表示通道操作所在的vhost</span><br><span class="line">transactional 表示通道是否处于事务模式，返回 true，否则返回 false</span><br><span class="line">confirm 表示通道是否处于确认模式，返回 true, 否则返回 false</span><br><span class="line">consumer_count 表示通过通道检索消息的逻辑AMQP消费者数量</span><br><span class="line">messages_unacknowledged 表示通过通道发送过但还没收到反馈的消息的数量</span><br><span class="line">messages_uncommitted 表示尚未提交的事务中接受的消息数</span><br><span class="line">acks_uncommitted 表示尚未提交的事务中接受的确认数</span><br><span class="line">messages_unconfirmed 表示尚未确认已发布的消息数量。在不处于确认模式中的通道上，该值为0</span><br><span class="line">prefetch_count 表示新消费者的QoS预取限制，如果没有限制则为0</span><br><span class="line">global_prefetch_count 表示整个通道的QoS预取限制，如果没有限制则为0</span><br><span class="line">如果没有指定任何 channelinfoitem 项，那么将展示 pid/user/consumer_count/messages_unacknowledged</span><br></pre></td></tr></table></figure>
<h2 id="rabbitmqctl-list-consumers-p-vhost"><a href="#rabbitmqctl-list-consumers-p-vhost" class="headerlink" title="rabbitmqctl list_consumers [-p vhost]"></a>rabbitmqctl list_consumers [-p vhost]</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">列出消费者，例如对一个队列的消息流的订阅者。每一行用tab字符分隔：</span><br><span class="line">订阅的队列名称、创建和管理订阅的通道id、在通道中唯一标识订阅的消费者tag、消息传输到订阅者之后是否需要确认的bool值、代表预取限制的整数（0表示none）、订阅者的其他参数</span><br></pre></td></tr></table></figure>
<h2 id="rabbitmqctl-status"><a href="#rabbitmqctl-status" class="headerlink" title="rabbitmqctl status"></a>rabbitmqctl status</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">展示broker的状态信息，例如在当前Erlang节点上正在运行的应用、RabbitMQ和Erlang版本号、OS名称、内存和文件描述统计信息</span><br></pre></td></tr></table></figure>
<h2 id="rabbitmqctl-node-health-check"><a href="#rabbitmqctl-node-health-check" class="headerlink" title="rabbitmqctl node_health_check"></a>rabbitmqctl node_health_check</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">RabbitMQ节点的健康检查，验证 Rabbit 应用正在运行，list_queues和list_channels返回，警告没有被设置</span><br><span class="line">rabbitmqctl node_health_check -n rabbit@stringer</span><br><span class="line">上述例子，表示对RabbitMQ节点进行健康检查</span><br><span class="line">`</span><br></pre></td></tr></table></figure>
<h2 id="rabbitmqctl-environment"><a href="#rabbitmqctl-environment" class="headerlink" title="rabbitmqctl environment"></a>rabbitmqctl environment</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">在每个正在运行的应用程序的应用程序环境中，显示每个变量的名称和值</span><br></pre></td></tr></table></figure>
<h2 id="rabbitmqctl-report"><a href="#rabbitmqctl-report" class="headerlink" title="rabbitmqctl report"></a>rabbitmqctl report</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">生成服务器状态报告，其中包括用于支持目的的所有服务器状态信息的并置。当伴随支持请求时，输出应该被重定向到一个文件</span><br><span class="line">rabbitmqctl report &gt; server_report.txt</span><br></pre></td></tr></table></figure>
<h2 id="rabbitmqctl-eval-expr"><a href="#rabbitmqctl-eval-expr" class="headerlink" title="rabbitmqctl eval {expr}"></a>rabbitmqctl eval {expr}</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">评估一个任务Erlang表达式</span><br><span class="line">rabbitmqctl eval &apos;node().&apos;</span><br><span class="line">上述例子，将返回 rabbitmqctl 已经连接的节点名称</span><br></pre></td></tr></table></figure>
<h1 id="Miscellaneous-繁杂"><a href="#Miscellaneous-繁杂" class="headerlink" title="Miscellaneous(繁杂)"></a>Miscellaneous(繁杂)</h1><h2 id="rabbitmqctl-close-connection-connectionpid-explanation"><a href="#rabbitmqctl-close-connection-connectionpid-explanation" class="headerlink" title="rabbitmqctl close_connection {connectionpid} {explanation}"></a>rabbitmqctl close_connection {connectionpid} {explanation}</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;connectionpid&#125; 表示待关闭连接的Erlang进程的ID号</span><br><span class="line">&#123;explanation&#125; 表示解释字符串</span><br><span class="line">指引broker去关闭与ID为 &#123;connectionid&#125; Erlang进程相关联的连接，作为AMQP连接关闭协议的一部分，它也会向连接的客户端传递 &#123;explanation&#125; 字符串</span><br><span class="line">rabbitmqctl close_connection &quot;&lt;rabbit@tanto.4262.0&gt;&quot; &quot;go away&quot;</span><br><span class="line">上述例子，表示关闭与ID号为 &quot;&lt;rabbit@tanto.4262.0&gt;&quot; 的Erlang进程相关联的连接，并向连接的客户端传输解释性语句 &quot;go away&quot;。</span><br></pre></td></tr></table></figure>
<h2 id="rabbitmqctl-trace-on-p-vhost"><a href="#rabbitmqctl-trace-on-p-vhost" class="headerlink" title="rabbitmqctl trace_on [-p vhost]"></a>rabbitmqctl trace_on [-p vhost]</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">vhost 表示要启动跟踪的虚拟机名称。开始跟踪。注意，跟踪状态不是持久的，如果服务重启，它将恢复为关闭</span><br></pre></td></tr></table></figure>
<h2 id="rabbitmqctl-trace-off-p-vhost"><a href="#rabbitmqctl-trace-off-p-vhost" class="headerlink" title="rabbitmqctl trace_off [-p vhost]"></a>rabbitmqctl trace_off [-p vhost]</h2><p>作用:停止跟踪</p>
<h2 id="rabbitmqctl-set-vm-memory-high-watermark-fraction"><a href="#rabbitmqctl-set-vm-memory-high-watermark-fraction" class="headerlink" title="rabbitmqctl set_vm_memory_high_watermark {fraction}"></a>rabbitmqctl set_vm_memory_high_watermark {fraction}</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;fraction&#125; 触发流量控制的新内存阈值分数，大于或等于0的浮点数</span><br></pre></td></tr></table></figure>
<h2 id="rabbitmqctl-set-vm-memory-high-watermark-absolute-memory-limit"><a href="#rabbitmqctl-set-vm-memory-high-watermark-absolute-memory-limit" class="headerlink" title="rabbitmqctl set_vm_memory_high_watermark absolute {memory_limit}"></a>rabbitmqctl set_vm_memory_high_watermark absolute {memory_limit}</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;memory_limit&#125; 触发流量控制的新内存限制，以字节表示，大于或等于0的整数或作为具有存储单元（例如： 512M或者1G），可用的单位有：</span><br><span class="line">k/kiB： kibibytes(2^10字节)； M/MiB: mebibytes(2^20字节)； G/GiB: gibibytes(2^30字节)</span><br><span class="line">kB: kilobytes(10^3); MB: megabytes(10^6); GB: gigabytes(10^9)</span><br></pre></td></tr></table></figure>
<h2 id="rabbitmqctl-set-disk-free-limit-disk-limit"><a href="#rabbitmqctl-set-disk-free-limit-disk-limit" class="headerlink" title="rabbitmqctl set_disk_free_limit {disk_limit}"></a>rabbitmqctl set_disk_free_limit {disk_limit}</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;disk_limit&#125; 下限为字节整数或具有存储单元的字符串（参见 vm_memory_high_watermark 命令），例如： 512M或1G，一旦可用磁盘空间达到限制，将会设置磁盘告警</span><br></pre></td></tr></table></figure>
<h2 id="rabbitmqctl-set-disk-free-limit-mem-relative-fraction"><a href="#rabbitmqctl-set-disk-free-limit-mem-relative-fraction" class="headerlink" title="rabbitmqctl set_disk_free_limit mem_relative {fraction}"></a>rabbitmqctl set_disk_free_limit mem_relative {fraction}</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;fraction&#125; 相对于可用RAM的限制，为非负的浮点数。低于1.0的值可能是危险的，应小心使用。</span><br></pre></td></tr></table></figure>
<h2 id="rabbitmqctl-encode-–decode-value-passphrase-–list-ciphers-–list-hashes-–cipher-cipher-–hash-hash-–iterations-iteraions"><a href="#rabbitmqctl-encode-–decode-value-passphrase-–list-ciphers-–list-hashes-–cipher-cipher-–hash-hash-–iterations-iteraions" class="headerlink" title="rabbitmqctl encode [–decode] [value] [passphrase] [–list-ciphers] [–list-hashes] [–cipher cipher] [–hash hash] [–iterations iteraions]"></a>rabbitmqctl encode [–decode] [value] [passphrase] [–list-ciphers] [–list-hashes] [–cipher cipher] [–hash hash] [–iterations iteraions]</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[--decode] 表示解密输入值的标志位。例如: rabbitmqctl encode --decode &apos;&#123;encrypted,&apos;&lt;&lt;&quot;...&quot;&gt;&gt;&#125;&apos; mypassphrase</span><br><span class="line">[value] [passphrase] 表示加密和解密的值、密码。 例如： rabbitmqctl encode &apos;&lt;&lt;&quot;guest&quot;&gt;&gt;&apos; mypassphrase 。例如： rabbitmqctl encode --decode &apos;&#123;encrypted,&apos;&lt;&lt;&quot;...&quot;&gt;&gt;&#125;&apos; mypassphrase </span><br><span class="line">[--list-ciphers] 表示列出支持的密码标志位。例如： rabbitmqctl encode --list-ciphers。</span><br><span class="line">[--list-hashes] 表示列出支持的哈希算法标志位。例如： rabbitmqctl encode --list-hashes。</span><br><span class="line">[--cipher cipher] [--hash hash] [--iterations iterations] 表示用于指定加密设置的选项，它们可以独立使用。例如： rabbitmqctl encode --cipher blowfish_cfb64 --hash sha256 --iterations 1000 &apos;&lt;&lt;&quot;guest&quot;&gt;&gt;&apos; mypassphrase</span><br></pre></td></tr></table></figure>
        </div>

        <blockquote class="post-copyright">
    
    <div class="content" style="display:none">
        
<span class="post-time">
    最后更新时间：<time datetime="2020-02-06T04:16:21.829Z" itemprop="dateUpdated">2020-02-06 12:16:21 12:16:21</time>
</span><br>


        
        <a href="/2017/12/22/rabbitmqctl-handbook/" target="_blank" rel="external">https://youxia999.github.io/2017/12/22/rabbitmqctl-handbook/</a>
        
    </div>
    
    <footer>
        <a href="https://youxia999.github.io">
            <img src="/img/avatar.jpg" alt="游侠">
            游侠
        </a>
    </footer>
</blockquote>

        


        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/rabbitmq/">rabbitmq</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/中间件技术/">中间件技术</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://youxia999.github.io/2017/12/22/rabbitmqctl-handbook/&title=《【转载】rabbitmq手册之rabbitmqctl》 — 思路比试错更重要&pic=https://youxia999.github.io/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://youxia999.github.io/2017/12/22/rabbitmqctl-handbook/&title=《【转载】rabbitmq手册之rabbitmqctl》 — 思路比试错更重要&source=" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://youxia999.github.io/2017/12/22/rabbitmqctl-handbook/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《【转载】rabbitmq手册之rabbitmqctl》 — 思路比试错更重要&url=https://youxia999.github.io/2017/12/22/rabbitmqctl-handbook/&via=https://youxia999.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://youxia999.github.io/2017/12/22/rabbitmqctl-handbook/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/2017/12/23/rabbitmq-cluster-install/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">centos7下rabbitmq3.7.2集群配置</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/2017/12/20/spring-boot-1x-boot-amqp/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">【java应用开发脚手架系列】spring boot amqp</h4>
      </a>
    </div>
  
</nav>



    








<section class="comments" id="comments">
    <div id="gitment_thread"></div>
	<link rel="stylesheet" href="https://jjeejj.github.io/css/gitment.css">
	<script src="https://jjeejj.github.io/js/gitment.js"></script>
    <script>
        var gitment = new Gitment({
		    id: 'Fri Dec 22 2017 19:52:16 GMT+0800',
            owner: 'youxia999',
            repo: 'gitment_comments',
            oauth: {
                client_id: '46d6bcb60b3252945f23',
                client_secret: '954a7427590c10667e9497f77996a1d2e88620e8',
            },
        })
        gitment.render('comments')
    </script>
</section>













</article>



</div>

        <footer class="footer">
    <div class="top">
        
<p>
    <span id="busuanzi_container_site_uv" style='display:none'>
        站点总访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style='display:none'>
        站点总访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>博客内容遵循 <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">知识共享 署名 - 非商业性 - 相同方式共享 4.0 国际协议</a></span>
        </p>
    </div>
    <div class="bottom">
        <p><span>游侠 &copy; 2015 - 2020</span>
            <span>
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://youxia999.github.io/2017/12/22/rabbitmqctl-handbook/&title=《【转载】rabbitmq手册之rabbitmqctl》 — 思路比试错更重要&pic=https://youxia999.github.io/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://youxia999.github.io/2017/12/22/rabbitmqctl-handbook/&title=《【转载】rabbitmq手册之rabbitmqctl》 — 思路比试错更重要&source=" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://youxia999.github.io/2017/12/22/rabbitmqctl-handbook/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《【转载】rabbitmq手册之rabbitmqctl》 — 思路比试错更重要&url=https://youxia999.github.io/2017/12/22/rabbitmqctl-handbook/&via=https://youxia999.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://youxia999.github.io/2017/12/22/rabbitmqctl-handbook/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="//api.qrserver.com/v1/create-qr-code/?data=https://youxia999.github.io/2017/12/22/rabbitmqctl-handbook/" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: false };


</script>

<script src="/js/main.min.js?v=1.7.2"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="/js/search.min.js?v=1.7.2" async></script>






<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>



<script>
(function() {
    var OriginTitile = document.title, titleTime;
    document.addEventListener('visibilitychange', function() {
        if (document.hidden) {
            document.title = '';
            clearTimeout(titleTime);
        } else {
            document.title = '';
            titleTime = setTimeout(function() {
                document.title = OriginTitile;
            },2000);
        }
    });
})();
</script>



</body>
</html>
