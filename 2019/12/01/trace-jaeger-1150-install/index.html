<!DOCTYPE html>
<html lang=ZH>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="renderer" content="webkit">
  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="format-detection" content="telephone=no,email=no,adress=no">
  <!-- Color theme for statusbar -->
  <meta name="theme-color" content="#000000" />
  <!-- 强制页面在当前窗口以独立页面显示,防止别人在框架里调用页面 -->
  <meta http-equiv="window-target" content="_top" />
  
  
  <title>【zipkin/jaeger使用系列】jaeger v1.15.1安装、配置 | 渐学顿悟</title>
  <meta name="description" content="背景jaeger又更新新版本了，虽然不是什么大版本，但是还是更新测试环境版本吧。 官方指南和常规方法官方文档：https:&#x2F;&#x2F;www.jaegertracing.io&#x2F;docs&#x2F;1.15&#x2F;cli&#x2F;看了官方文档，照着去测试环境操作，没有看到自己想看到的效果(jaeger_colletor的help效果如下).说好的elasticsearch、kafka配置呢？ help与环境变量耦合jaeger-c">
<meta property="og:type" content="article">
<meta property="og:title" content="【zipkin&#x2F;jaeger使用系列】jaeger v1.15.1安装、配置">
<meta property="og:url" content="https://jxdw.github.io/2019/12/01/trace-jaeger-1150-install/index.html">
<meta property="og:site_name" content="渐学顿悟">
<meta property="og:description" content="背景jaeger又更新新版本了，虽然不是什么大版本，但是还是更新测试环境版本吧。 官方指南和常规方法官方文档：https:&#x2F;&#x2F;www.jaegertracing.io&#x2F;docs&#x2F;1.15&#x2F;cli&#x2F;看了官方文档，照着去测试环境操作，没有看到自己想看到的效果(jaeger_colletor的help效果如下).说好的elasticsearch、kafka配置呢？ help与环境变量耦合jaeger-c">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://jxdw.github.io/img/business/trace/jaeger_collector_use_case.png">
<meta property="article:published_time" content="2019-12-01T15:00:00.000Z">
<meta property="article:modified_time" content="2020-10-14T15:34:47.328Z">
<meta property="article:author" content="渐学顿悟">
<meta property="article:tag" content="zipkin&#x2F;jaeger知识体系">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://jxdw.github.io/img/business/trace/jaeger_collector_use_case.png">
  <!-- Canonical links -->
  <link rel="canonical" href="https://jxdw.github.io/2019/12/01/trace-jaeger-1150-install/index.html">
  
    <link rel="alternate" href="/atom.xml" title="渐学顿悟" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png" type="image/x-icon">
  
  
<link rel="stylesheet" href="/css/style.css">

  
  
  
  
<meta name="generator" content="Hexo 5.2.0"></head>


<body class="main-center theme-purple" itemscope itemtype="http://schema.org/WebPage">
  <header class="header" itemscope itemtype="http://schema.org/WPHeader">
  <div class="slimContent">
    <div class="navbar-header">
      
      
      <div class="profile-block text-center">
        <a id="avatar" href="https://github.com/jxdw" target="_blank">
          <img class="img-circle img-rotate" src="https://www.gravatar.com/avatar/80df4bfee856f0107ea8d54da41c3f31?s=128" width="200" height="200">
        </a>
        <h2 id="name" class="hidden-xs hidden-sm">渐学顿悟</h2>
        <h3 id="title" class="hidden-xs hidden-sm hidden-md">程序员(后端)</h3>
        <small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i> Shenzhen, China</small>
      </div>
      
      <div class="search" id="search-form-wrap">

    <form class="search-form sidebar-form">
        <div class="input-group">
            <input type="text" class="search-form-input form-control" placeholder="搜索" />
            <span class="input-group-btn">
                <button type="submit" class="search-form-submit btn btn-flat" onclick="return false;"><i class="icon icon-search"></i></button>
            </span>
        </div>
    </form>
    <div class="ins-search">
  <div class="ins-search-mask"></div>
  <div class="ins-search-container">
    <div class="ins-input-wrapper">
      <input type="text" class="ins-search-input" placeholder="想要查找什么..." x-webkit-speech />
      <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
    </div>
    <div class="ins-section-wrapper">
      <div class="ins-section-container"></div>
    </div>
  </div>
</div>


</div>
      <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation">
      <ul class="nav navbar-nav main-nav ">
        
        
        <li class="menu-item menu-item-home">
          <a href="/.">
            
            <i class="icon icon-home-fill"></i>
            
            <span class="menu-title">首页</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/">
            
            <i class="icon icon-archives-fill"></i>
            
            <span class="menu-title">归档</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-links">
          <a href="/links">
            
            <i class="icon icon-friendship"></i>
            
            <span class="menu-title">友链</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-about">
          <a href="/about">
            
            <i class="icon icon-cup-fill"></i>
            
            <span class="menu-title">关于</span>
          </a>
        </li>
        
      </ul>
      
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/jxdw" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
        <li><a href="/atom.xml" target="_blank" title="Rss" data-toggle=tooltip data-placement=top><i class="icon icon-rss"></i></a></li>
        
    </ul>

    </nav>
  </div>
</header>

  
    <aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    
      <div class="widget">
    <h3 class="widget-title">博客公告</h3>
    <div class="widget-body">
        <div id="board">
            <div class="content">
                <p>2020年，重新开始。欢迎交流与分享!</p>
            </div>
        </div>
    </div>
</div>

    
      
  <div class="widget">
    <h3 class="widget-title">文章标签</h3>
    <div class="widget-body">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/centos-docker-k8s%E7%9F%A5%E8%AF%86%E4%BD%93%E7%B3%BB/" rel="tag">centos/docker/k8s知识体系</a><span class="tag-list-count">34</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/elastic-job%E6%8A%80%E6%9C%AF/" rel="tag">elastic-job技术</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/es6%E8%AF%AD%E8%A8%80/" rel="tag">es6语言</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/golang%E7%9F%A5%E8%AF%86%E4%BD%93%E7%B3%BB/" rel="tag">golang知识体系</a><span class="tag-list-count">15</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java%E7%9F%A5%E8%AF%86%E4%BD%93%E7%B3%BB/" rel="tag">java知识体系</a><span class="tag-list-count">27</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql%E6%8A%80%E6%9C%AF/" rel="tag">mysql技术</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nginx-haproxy%E6%8A%80%E6%9C%AF/" rel="tag">nginx/haproxy技术</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/prometheus%E6%8A%80%E6%9C%AF/" rel="tag">prometheus技术</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rabbitmq%E6%8A%80%E6%9C%AF/" rel="tag">rabbitmq技术</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/redis%E7%9F%A5%E8%AF%86%E4%BD%93%E7%B3%BB/" rel="tag">redis知识体系</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/zipkin-jaeger%E7%9F%A5%E8%AF%86%E4%BD%93%E7%B3%BB/" rel="tag">zipkin/jaeger知识体系</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%84%9F%E6%82%9F/" rel="tag">感悟</a><span class="tag-list-count">6</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">文章归档</h3>
    <div class="widget-body">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/">2020</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/">2019</a><span class="archive-list-count">23</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/">2018</a><span class="archive-list-count">41</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/">2017</a><span class="archive-list-count">33</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/">2016</a><span class="archive-list-count">13</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">最近文章</h3>
    <div class="widget-body">
      <ul class="recent-post-list list-unstyled no-thumbnail">
        
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                
              </p>
              <p class="item-title">
                <a href="/2020/09/25/nacos-go-client-config-example/" class="title">【中间件go client系列】go语言服务使用nacos server作为配置中心</a>
              </p>
              <p class="item-date">
                <time datetime="2020-09-25T11:17:59.000Z" itemprop="datePublished">2020-09-25 19:17:59</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                
              </p>
              <p class="item-title">
                <a href="/2020/07/20/golang-upload-file-to-alicloud/" class="title">【中间件go client系列】阿里云oss的go client使用</a>
              </p>
              <p class="item-date">
                <time datetime="2020-07-20T12:17:59.000Z" itemprop="datePublished">2020-07-20 20:17:59</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                
              </p>
              <p class="item-title">
                <a href="/2020/07/14/es6_vue_study_day8/" class="title">【转载】vue学习之day8</a>
              </p>
              <p class="item-date">
                <time datetime="2020-07-14T13:41:16.000Z" itemprop="datePublished">2020-07-14 21:41:16</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                
              </p>
              <p class="item-title">
                <a href="/2020/07/13/es6_vue_study_day7/" class="title">【转载】vue学习之day7</a>
              </p>
              <p class="item-date">
                <time datetime="2020-07-13T13:25:16.000Z" itemprop="datePublished">2020-07-13 21:25:16</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                
              </p>
              <p class="item-title">
                <a href="/2020/07/12/es6_vue_study_day6/" class="title">【转载】vue学习之day6</a>
              </p>
              <p class="item-date">
                <time datetime="2020-07-12T13:21:16.000Z" itemprop="datePublished">2020-07-12 21:21:16</time>
              </p>
            </div>
          </li>
          
      </ul>
    </div>
  </div>
  

    
  </div>
</aside>

  
  
<main class="main" role="main">
  <div class="content">
  <article id="post-trace-jaeger-1150-install" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting">
    
    <div class="article-header">
      
        
  
    <h1 class="article-title" itemprop="name">
      【zipkin/jaeger使用系列】jaeger v1.15.1安装、配置
    </h1>
  

      
      <div class="article-meta">
        <span class="article-date">
    <i class="icon icon-calendar-check"></i>
	<a href="/2019/12/01/trace-jaeger-1150-install/" class="article-date">
	  <time datetime="2019-12-01T15:00:00.000Z" itemprop="datePublished">2019-12-01 23:00:00</time>
	</a>
</span>
        
        
  <span class="article-tag">
    <i class="icon icon-tags"></i>
	<a class="article-tag-link-link" href="/tags/zipkin-jaeger%E7%9F%A5%E8%AF%86%E4%BD%93%E7%B3%BB/" rel="tag">zipkin/jaeger知识体系</a>
  </span>


        

        <span class="post-comment"><i class="icon icon-comment"></i> <a href="/2019/12/01/trace-jaeger-1150-install/#comments" class="article-comment-link">评论</a></span>
        
      </div>
    </div>
    <div class="article-entry marked-body" itemprop="articleBody">
      
        <h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><p>jaeger又更新新版本了，虽然不是什么大版本，但是还是更新测试环境版本吧。</p>
<h1 id="官方指南和常规方法"><a href="#官方指南和常规方法" class="headerlink" title="官方指南和常规方法"></a>官方指南和常规方法</h1><p>官方文档：<a target="_blank" rel="noopener" href="https://www.jaegertracing.io/docs/1.15/cli/">https://www.jaegertracing.io/docs/1.15/cli/</a><br>看了官方文档，照着去测试环境操作，没有看到自己想看到的效果(jaeger_colletor的help效果如下).说好的elasticsearch、kafka配置呢？<br><img src="https://jxdw.github.io/img/business/trace/jaeger_collector_use_case.png"></p>
<h1 id="help与环境变量耦合"><a href="#help与环境变量耦合" class="headerlink" title="help与环境变量耦合"></a>help与环境变量耦合</h1><h2 id="jaeger-collector使用elasticsearch为存储"><a href="#jaeger-collector使用elasticsearch为存储" class="headerlink" title="jaeger-collector使用elasticsearch为存储"></a>jaeger-collector使用elasticsearch为存储</h2><p>大胆的猜测，help命令和环境变量耦合了。输入：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SPAN_STORAGE_TYPE&#x3D;elasticsearch .&#x2F;jaeger-collector --help</span><br></pre></td></tr></table></figure>

<p>果然，输出的效果如下，真的是防不甚防啊。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">2019-12-01 22:18:33 maxprocs: Leaving GOMAXPROCS&#x3D;4: CPU quota undefined</span><br><span class="line">Jaeger collector receives traces from Jaeger agents and runs them through a processing pipeline.</span><br><span class="line">Usage:</span><br><span class="line">  jaeger-collector [flags]</span><br><span class="line">  jaeger-collector [command]</span><br><span class="line">Available Commands:</span><br><span class="line">  docs        Generates documentation</span><br><span class="line">  env         Help about environment variables.</span><br><span class="line">  help        Help about any command</span><br><span class="line">  version     Print the version.</span><br><span class="line">Flags:</span><br><span class="line">      --admin-http-port int                                The http port for the admin server, including health check, &#x2F;metrics, etc. (default 14269)</span><br><span class="line">      --collector.grpc-port int                            The gRPC port for the collector service (default 14250)</span><br><span class="line">      --collector.grpc.tls                                 Enable TLS on the server</span><br><span class="line">      --collector.grpc.tls.cert string                     Path to a TLS Certificate file, used to identify this server to clients</span><br><span class="line">      --collector.grpc.tls.client-ca string                Path to a TLS CA (Certification Authority) file used to verify certificates presented by clients (if unset, all clients are permitted)</span><br><span class="line">      --collector.grpc.tls.client.ca string                (deprecated) see --collector.grpc.tls.client-ca</span><br><span class="line">      --collector.grpc.tls.key string                      Path to a TLS Private Key file, used to identify this server to clients</span><br><span class="line">      --collector.http-port int                            The HTTP port for the collector service (default 14268)</span><br><span class="line">      --collector.num-workers int                          The number of workers pulling items from the queue (default 50)</span><br><span class="line">      --collector.port int                                 The TChannel port for the collector service (default 14267)</span><br><span class="line">      --collector.queue-size int                           The queue size of the collector (default 2000)</span><br><span class="line">      --collector.zipkin.allowed-headers string            Comma separated list of allowed headers for the Zipkin collector service, default content-type (default &quot;content-type&quot;)</span><br><span class="line">      --collector.zipkin.allowed-origins string            Comma separated list of allowed origins for the Zipkin collector service, default accepts all (default &quot;*&quot;)</span><br><span class="line">      --collector.zipkin.http-port int                     The HTTP port for the Zipkin collector service e.g. 9411</span><br><span class="line">      --config-file string                                 Configuration file in JSON, TOML, YAML, HCL, or Java properties formats (default none). See spf13&#x2F;viper for precedence.</span><br><span class="line">      --downsampling.hashsalt string                       Salt used when hashing trace id for downsampling.</span><br><span class="line">      --downsampling.ratio float                           Ratio of spans passed to storage after downsampling (between 0 and 1), e.g ratio &#x3D; 0.3 means we are keeping 30% of spans and dropping 70% of spans; ratio &#x3D; 1.0 disables downsampling. (default 1)</span><br><span class="line">      --es-archive.bulk.actions int                        The number of requests that can be enqueued before the bulk processor decides to commit</span><br><span class="line">      --es-archive.bulk.flush-interval duration            A time.Duration after which bulk requests are committed, regardless of other thresholds. Set to zero to disable. By default, this is disabled. (default 0s)</span><br><span class="line">      --es-archive.bulk.size int                           The number of bytes that the bulk requests can take up before the bulk processor decides to commit</span><br><span class="line">      --es-archive.bulk.workers int                        The number of workers that are able to receive bulk requests and eventually commit them to Elasticsearch</span><br><span class="line">      --es-archive.create-index-templates                  Create index templates at application startup. Set to false when templates are installed manually.</span><br><span class="line">      --es-archive.enabled                                 Enable extra storage</span><br><span class="line">      --es-archive.index-prefix string                     Optional prefix of Jaeger indices. For example &quot;production&quot; creates &quot;production-jaeger-*&quot;.</span><br><span class="line">      --es-archive.max-num-spans int                       The maximum number of spans to fetch at a time per query in Elasticsearch</span><br><span class="line">      --es-archive.max-span-age duration                   The maximum lookback for spans in Elasticsearch (default 0s)</span><br><span class="line">      --es-archive.num-replicas int                        The number of replicas per index in Elasticsearch</span><br><span class="line">      --es-archive.num-shards int                          The number of shards per index in Elasticsearch</span><br><span class="line">      --es-archive.password string                         The password required by Elasticsearch</span><br><span class="line">      --es-archive.server-urls string                      The comma-separated list of Elasticsearch servers, must be full url i.e. http:&#x2F;&#x2F;localhost:9200</span><br><span class="line">      --es-archive.sniffer                                 The sniffer config for Elasticsearch; client uses sniffing process to find all nodes automatically, disable if not required</span><br><span class="line">      --es-archive.tags-as-fields.all                      (experimental) Store all span and process tags as object fields. If true .tags-as-fields.config-file is ignored. Binary tags are always stored as nested objects.</span><br><span class="line">      --es-archive.tags-as-fields.config-file string       (experimental) Optional path to a file containing tag keys which will be stored as object fields. Each key should be on a separate line.</span><br><span class="line">      --es-archive.tags-as-fields.dot-replacement string   (experimental) The character used to replace dots (&quot;.&quot;) in tag keys stored as object fields.</span><br><span class="line">      --es-archive.timeout duration                        Timeout used for queries. A Timeout of zero means no timeout (default 0s)</span><br><span class="line">      --es-archive.tls                                     Enable TLS with client certificates.</span><br><span class="line">      --es-archive.tls.ca string                           Path to TLS CA file</span><br><span class="line">      --es-archive.tls.cert string                         Path to TLS certificate file</span><br><span class="line">      --es-archive.tls.key string                          Path to TLS key file</span><br><span class="line">      --es-archive.tls.skip-host-verify                    (insecure) Skip server&#39;s certificate chain and host name verification</span><br><span class="line">      --es-archive.token-file string                       Path to a file containing bearer token. This flag also loads CA if it is specified.</span><br><span class="line">      --es-archive.use-aliases                             (experimental) Use read and write aliases for indices. Use this option with Elasticsearch rollover API. It requires an external component to create aliases before startup and then performing its management. Note that es-archive.max-span-age is not taken into the account and has to be substituted by external component managing read alias.</span><br><span class="line">      --es-archive.username string                         The username required by Elasticsearch. The basic authentication also loads CA if it is specified.</span><br><span class="line">      --es-archive.version uint                            The major Elasticsearch version. If not specified, the value will be auto-detected from Elasticsearch.</span><br><span class="line">      --es.bulk.actions int                                The number of requests that can be enqueued before the bulk processor decides to commit (default 1000)</span><br><span class="line">      --es.bulk.flush-interval duration                    A time.Duration after which bulk requests are committed, regardless of other thresholds. Set to zero to disable. By default, this is disabled. (default 200ms)</span><br><span class="line">      --es.bulk.size int                                   The number of bytes that the bulk requests can take up before the bulk processor decides to commit (default 5000000)</span><br><span class="line">      --es.bulk.workers int                                The number of workers that are able to receive bulk requests and eventually commit them to Elasticsearch (default 1)</span><br><span class="line">      --es.create-index-templates                          Create index templates at application startup. Set to false when templates are installed manually. (default true)</span><br><span class="line">      --es.index-prefix string                             Optional prefix of Jaeger indices. For example &quot;production&quot; creates &quot;production-jaeger-*&quot;.</span><br><span class="line">      --es.max-num-spans int                               The maximum number of spans to fetch at a time per query in Elasticsearch (default 10000)</span><br><span class="line">      --es.max-span-age duration                           The maximum lookback for spans in Elasticsearch (default 72h0m0s)</span><br><span class="line">      --es.num-replicas int                                The number of replicas per index in Elasticsearch (default 1)</span><br><span class="line">      --es.num-shards int                                  The number of shards per index in Elasticsearch (default 5)</span><br><span class="line">      --es.password string                                 The password required by Elasticsearch</span><br><span class="line">      --es.server-urls string                              The comma-separated list of Elasticsearch servers, must be full url i.e. http:&#x2F;&#x2F;localhost:9200 (default &quot;http:&#x2F;&#x2F;127.0.0.1:9200&quot;)</span><br><span class="line">      --es.sniffer                                         The sniffer config for Elasticsearch; client uses sniffing process to find all nodes automatically, disable if not required</span><br><span class="line">      --es.tags-as-fields.all                              (experimental) Store all span and process tags as object fields. If true .tags-as-fields.config-file is ignored. Binary tags are always stored as nested objects.</span><br><span class="line">      --es.tags-as-fields.config-file string               (experimental) Optional path to a file containing tag keys which will be stored as object fields. Each key should be on a separate line.</span><br><span class="line">      --es.tags-as-fields.dot-replacement string           (experimental) The character used to replace dots (&quot;.&quot;) in tag keys stored as object fields. (default &quot;@&quot;)</span><br><span class="line">      --es.timeout duration                                Timeout used for queries. A Timeout of zero means no timeout (default 0s)</span><br><span class="line">      --es.tls                                             Enable TLS with client certificates.</span><br><span class="line">      --es.tls.ca string                                   Path to TLS CA file</span><br><span class="line">      --es.tls.cert string                                 Path to TLS certificate file</span><br><span class="line">      --es.tls.key string                                  Path to TLS key file</span><br><span class="line">      --es.tls.skip-host-verify                            (insecure) Skip server&#39;s certificate chain and host name verification</span><br><span class="line">      --es.token-file string                               Path to a file containing bearer token. This flag also loads CA if it is specified.</span><br><span class="line">      --es.use-aliases                                     (experimental) Use read and write aliases for indices. Use this option with Elasticsearch rollover API. It requires an external component to create aliases before startup and then performing its management. Note that es.max-span-age is not taken into the account and has to be substituted by external component managing read alias.</span><br><span class="line">      --es.username string                                 The username required by Elasticsearch. The basic authentication also loads CA if it is specified.</span><br><span class="line">      --es.version uint                                    The major Elasticsearch version. If not specified, the value will be auto-detected from Elasticsearch.</span><br><span class="line">      --health-check-http-port int                         (deprecated) see --admin-http-port</span><br><span class="line">  -h, --help                                               help for jaeger-collector</span><br><span class="line">      --log-level string                                   Minimal allowed log Level. For more levels see https:&#x2F;&#x2F;github.com&#x2F;uber-go&#x2F;zap (default &quot;info&quot;)</span><br><span class="line">      --metrics-backend string                             Defines which metrics backend to use for metrics reporting: expvar, prometheus, none (default &quot;prometheus&quot;)</span><br><span class="line">      --metrics-http-route string                          Defines the route of HTTP endpoint for metrics backends that support scraping (default &quot;&#x2F;metrics&quot;)</span><br><span class="line">      --sampling.strategies-file string                    The path for the sampling strategies file in JSON format. See sampling documentation to see format of the file</span><br><span class="line">      --span-storage.type string                           (deprecated) please use SPAN_STORAGE_TYPE environment variable. Run this binary with the &#39;env&#39; command for help.</span><br><span class="line">Use &quot;jaeger-collector [command] --help&quot; for more information about a command.</span><br></pre></td></tr></table></figure>

<h2 id="jaeger-collector使用kafka为存储"><a href="#jaeger-collector使用kafka为存储" class="headerlink" title="jaeger-collector使用kafka为存储"></a>jaeger-collector使用kafka为存储</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SPAN_STORAGE_TYPE&#x3D;kafka .&#x2F;jaeger-collector --help</span><br></pre></td></tr></table></figure>

<p>输出如下：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">2019&#x2F;12&#x2F;01 22:31:21 maxprocs: Leaving GOMAXPROCS&#x3D;4: CPU quota undefined</span><br><span class="line">Jaeger collector receives traces from Jaeger agents and runs them through a processing pipeline.</span><br><span class="line">Usage:</span><br><span class="line">  jaeger-collector [flags]</span><br><span class="line">  jaeger-collector [command]</span><br><span class="line">Available Commands:</span><br><span class="line">  docs        Generates documentation</span><br><span class="line">  env         Help about environment variables.</span><br><span class="line">  help        Help about any command</span><br><span class="line">  version     Print the version.</span><br><span class="line">Flags:</span><br><span class="line">      --admin-http-port int                           The http port for the admin server, including health check, &#x2F;metrics, etc. (default 14269)</span><br><span class="line">      --collector.grpc-port int                       The gRPC port for the collector service (default 14250)</span><br><span class="line">      --collector.grpc.tls                            Enable TLS on the server</span><br><span class="line">      --collector.grpc.tls.cert string                Path to a TLS Certificate file, used to identify this server to clients</span><br><span class="line">      --collector.grpc.tls.client-ca string           Path to a TLS CA (Certification Authority) file used to verify certificates presented by clients (if unset, all clients are permitted)</span><br><span class="line">      --collector.grpc.tls.client.ca string           (deprecated) see --collector.grpc.tls.client-ca</span><br><span class="line">      --collector.grpc.tls.key string                 Path to a TLS Private Key file, used to identify this server to clients</span><br><span class="line">      --collector.http-port int                       The HTTP port for the collector service (default 14268)</span><br><span class="line">      --collector.num-workers int                     The number of workers pulling items from the queue (default 50)</span><br><span class="line">      --collector.port int                            The TChannel port for the collector service (default 14267)</span><br><span class="line">      --collector.queue-size int                      The queue size of the collector (default 2000)</span><br><span class="line">      --collector.zipkin.allowed-headers string       Comma separated list of allowed headers for the Zipkin collector service, default content-type (default &quot;content-type&quot;)</span><br><span class="line">      --collector.zipkin.allowed-origins string       Comma separated list of allowed origins for the Zipkin collector service, default accepts all (default &quot;*&quot;)</span><br><span class="line">      --collector.zipkin.http-port int                The HTTP port for the Zipkin collector service e.g. 9411</span><br><span class="line">      --config-file string                            Configuration file in JSON, TOML, YAML, HCL, or Java properties formats (default none). See spf13&#x2F;viper for precedence.</span><br><span class="line">      --downsampling.hashsalt string                  Salt used when hashing trace id for downsampling.</span><br><span class="line">      --downsampling.ratio float                      Ratio of spans passed to storage after downsampling (between 0 and 1), e.g ratio &#x3D; 0.3 means we are keeping 30% of spans and dropping 70% of spans; ratio &#x3D; 1.0 disables downsampling. (default 1)</span><br><span class="line">      --health-check-http-port int                    (deprecated) see --admin-http-port</span><br><span class="line">  -h, --help                                          help for jaeger-collector</span><br><span class="line">      --kafka.producer.authentication string          Authentication type used to authenticate with kafka cluster. e.g. none, kerberos, tls (default &quot;none&quot;)</span><br><span class="line">      --kafka.producer.brokers string                 The comma-separated list of kafka brokers. i.e. &#39;127.0.0.1:9092,0.0.0:1234&#39; (default &quot;127.0.0.1:9092&quot;)</span><br><span class="line">      --kafka.producer.compression string             (experimental) Type of compression (none, gzip, snappy, lz4, zstd) to use on messages (default &quot;none&quot;)</span><br><span class="line">      --kafka.producer.compression-level int          (experimental) compression level to use on messages. gzip &#x3D; 1-9 (default &#x3D; 6), snappy &#x3D; none, lz4 &#x3D; 1-17 (default &#x3D; 9), zstd &#x3D; -131072 - 22 (default &#x3D; 3)</span><br><span class="line">      --kafka.producer.encoding string                Encoding of spans (&quot;json&quot; or &quot;protobuf&quot;) sent to kafka. (default &quot;protobuf&quot;)</span><br><span class="line">      --kafka.producer.kerberos.config-file string    Path to Kerberos configuration. i.e &#x2F;etc&#x2F;krb5.conf (default &quot;&#x2F;etc&#x2F;krb5.conf&quot;)</span><br><span class="line">      --kafka.producer.kerberos.keytab-file string    Path to keytab file. i.e &#x2F;etc&#x2F;security&#x2F;kafka.keytab (default &quot;&#x2F;etc&#x2F;security&#x2F;kafka.keytab&quot;)</span><br><span class="line">      --kafka.producer.kerberos.password string       The Kerberos password used for authenticate with KDC</span><br><span class="line">      --kafka.producer.kerberos.realm string          Kerberos realm</span><br><span class="line">      --kafka.producer.kerberos.service-name string   Kerberos service name (default &quot;kafka&quot;)</span><br><span class="line">      --kafka.producer.kerberos.use-keytab            Use of keytab instead of password, if this is true, keytab file will be used instead of password</span><br><span class="line">      --kafka.producer.kerberos.username string       The Kerberos username used for authenticate with KDC</span><br><span class="line">      --kafka.producer.protocol-version string        Kafka protocol version - must be supported by kafka server</span><br><span class="line">      --kafka.producer.required-acks string           (experimental) Required kafka broker acknowledgement. i.e. noack, local, all (default &quot;local&quot;)</span><br><span class="line">      --kafka.producer.tls.ca string                  Path to the TLS CA for the Kafka connection</span><br><span class="line">      --kafka.producer.tls.cert string                Path to the TLS Certificate for the Kafka connection</span><br><span class="line">      --kafka.producer.tls.key string                 Path to the TLS Key for the Kafka connection</span><br><span class="line">      --kafka.producer.topic string                   The name of the kafka topic (default &quot;jaeger-spans&quot;)</span><br><span class="line">      --log-level string                              Minimal allowed log Level. For more levels see https:&#x2F;&#x2F;github.com&#x2F;uber-go&#x2F;zap (default &quot;info&quot;)</span><br><span class="line">      --metrics-backend string                        Defines which metrics backend to use for metrics reporting: expvar, prometheus, none (default &quot;prometheus&quot;)</span><br><span class="line">      --metrics-http-route string                     Defines the route of HTTP endpoint for metrics backends that support scraping (default &quot;&#x2F;metrics&quot;)</span><br><span class="line">      --sampling.strategies-file string               The path for the sampling strategies file in JSON format. See sampling documentation to see format of the file</span><br><span class="line">      --span-storage.type string                      (deprecated) please use SPAN_STORAGE_TYPE environment variable. Run this binary with the &#39;env&#39; command for help.</span><br><span class="line">Use &quot;jaeger-collector [command] --help&quot; for more information about a command.</span><br></pre></td></tr></table></figure>
      
    </div>
    <div class="article-footer">
      <blockquote class="mt-2x">
  <ul class="post-copyright list-unstyled">
    
    <li class="post-copyright-link hidden-xs">
      <strong>本文链接：</strong>
      <a href="https://jxdw.github.io/2019/12/01/trace-jaeger-1150-install/" title="【zipkin/jaeger使用系列】jaeger v1.15.1安装、配置" target="_blank" rel="external">https://jxdw.github.io/2019/12/01/trace-jaeger-1150-install/</a>
    </li>
    
    <li class="post-copyright-license">
      <strong>版权声明： </strong> 本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN协议</a> 许可协议。转载请注明出处！
    </li>
  </ul>
</blockquote>


<div class="panel panel-default panel-badger">
  <div class="panel-body">
    <figure class="media">
      <div class="media-left">
        <a href="https://github.com/jxdw" target="_blank" class="img-burn thumb-sm visible-lg">
          <img src="https://www.gravatar.com/avatar/80df4bfee856f0107ea8d54da41c3f31?s=128" class="img-rounded w-full" alt="">
        </a>
      </div>
      <div class="media-body">
        <h3 class="media-heading"><a href="https://github.com/jxdw" target="_blank"><span class="text-dark">渐学顿悟</span><small class="ml-1x">程序员(后端)</small></a></h3>
        <div>一个没有技术慧根/悟性的人，只有需要渐学/刻意练习，方能顿悟，自勉。</div>
      </div>
    </figure>
  </div>
</div>


    </div>
  </article>
  
    
  <section id="comments">
  	
      <div id="vcomments"></div>
    
  </section>


  
</div>

  <nav class="bar bar-footer clearfix" data-stick-bottom>
  <div class="bar-inner">
  
  <ul class="pager pull-left">
    
    <li class="prev">
      <a href="/2020/03/25/jishuzongjie-2019/" title="2019年度的总结"><i class="icon icon-angle-left" aria-hidden="true"></i><span>&nbsp;&nbsp;上一篇</span></a>
    </li>
    
    
    <li class="next">
      <a href="/2019/10/07/prometheus_monitor_rabbitmq/" title="【prometheus知识体系】Prometheus监控rabbitmq3.8.0"><span>下一篇&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden="true"></i></a>
    </li>
    
    
  </ul>
  
  
  
  <div class="bar-right">
    
    <div class="share-component" data-sites="weibo,qq,wechat" data-mobile-sites="weibo,qq,qzone"></div>
    
  </div>
  </div>
</nav>
  


</main>

  <footer class="footer" itemscope itemtype="http://schema.org/WPFooter">
	
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/jxdw" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
        <li><a href="/atom.xml" target="_blank" title="Rss" data-toggle=tooltip data-placement=top><i class="icon icon-rss"></i></a></li>
        
    </ul>

    <div class="copyright">
    	
        &copy; 2020 渐学顿悟
        
        <div class="publishby">
        	Theme by <a href="https://github.com/cofess" target="_blank"> cofess </a>base on <a href="https://github.com/cofess/hexo-theme-pure" target="_blank">pure</a>.
        </div>
    </div>
</footer>
  <script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
<script>
window.jQuery || document.write('<script src="js/jquery.min.js"><\/script>')
</script>

<script src="/js/plugin.min.js"></script>


<script src="/js/application.js"></script>


    <script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(未命名)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>






   




   
    
  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/valine"></script>
  <script type="text/javascript">
  var GUEST = ['nick', 'mail', 'link'];
  var meta = 'nick,mail,link';
  meta = meta.split(',').filter(function(item) {
    return GUEST.indexOf(item) > -1;
  });
  new Valine({
    el: '#vcomments',
    verify: true,
    notify: false,
    appId: 'wrre3Nrx21CqKiChLnKn034M-gzGzoHsz',
    appKey: 'rkWWNONo7LAJhlS936vnywQ9',
    placeholder: '请输入您的评论',
    avatar: 'mm',
    meta: meta,
    pageSize: '10' || 10,
    visitor: false
  });
  </script>

     







</body>
</html>