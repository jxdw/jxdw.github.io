<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.0/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css">

<script class="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"jxdw.github.io","root":"/","scheme":"Pisces","version":"8.0.1","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12,"width":240},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"valine","storage":true,"lazyload":false,"nav":null,"activeClass":"valine"},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="渐学顿悟">
<meta property="og:url" content="https://jxdw.github.io/page/3/index.html">
<meta property="og:site_name" content="渐学顿悟">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="渐学顿悟">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://jxdw.github.io/page/3/">


<script class="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>渐学顿悟</title>
  






  <noscript>
  <style>
  body { margin-top: 2rem; }

  .use-motion .menu-item,
  .use-motion .sidebar,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header {
    visibility: visible;
  }

  .use-motion .header,
  .use-motion .site-brand-container .toggle,
  .use-motion .footer { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle,
  .use-motion .custom-logo-image {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line {
    transform: scaleX(1);
  }

  .search-pop-overlay, .sidebar-nav { display: none; }
  .sidebar-panel { display: block; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="渐学顿悟" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">渐学顿悟</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">记录技术的学习和实践过程</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">12</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">122</span></a>

  </li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <section class="post-toc-wrap sidebar-panel">
      </section>
      <!--/noindex-->

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="渐学顿悟"
      src="/favicon.png">
  <p class="site-author-name" itemprop="name">渐学顿悟</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">122</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">12</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>
  <div class="cc-license site-overview-item animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



      </section>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">
      

      
    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://jxdw.github.io/2019/06/01/centos7-share-a-photo/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/favicon.png">
      <meta itemprop="name" content="渐学顿悟">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="渐学顿悟">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/06/01/centos7-share-a-photo/" class="post-title-link" itemprop="url">【网络系列】【转载】TCP通信转UDP通信并加速</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-06-01 21:46:40 21:46:40" itemprop="dateCreated datePublished" datetime="2019-06-01T21:46:40+08:00">2019-06-01 21:46:40</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2020-10-13 22:06:21 22:06:21" itemprop="dateModified" datetime="2020-10-13T22:06:21+08:00">2020-10-13 22:06:21</time>
      </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2019/06/01/centos7-share-a-photo/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2019/06/01/centos7-share-a-photo/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><img src="https://jxdw.github.io/img/devops/centos7/12402.png"></p>
<p>附原文</p>
<p><img src="https://jxdw.github.io/img/devops/centos7/12402_source.png"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://jxdw.github.io/2019/05/19/redis-sentinel-install/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/favicon.png">
      <meta itemprop="name" content="渐学顿悟">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="渐学顿悟">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/05/19/redis-sentinel-install/" class="post-title-link" itemprop="url">【redis使用系列】redis5.0的sentinel模式体验</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-05-19 10:43:17 10:43:17" itemprop="dateCreated datePublished" datetime="2019-05-19T10:43:17+08:00">2019-05-19 10:43:17</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2020-10-13 23:23:37 23:23:37" itemprop="dateModified" datetime="2020-10-13T23:23:37+08:00">2020-10-13 23:23:37</time>
      </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2019/05/19/redis-sentinel-install/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2019/05/19/redis-sentinel-install/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">https:&#x2F;&#x2F;www.cnblogs.com&#x2F;ibethfy&#x2F;p&#x2F;9965902.html</span><br><span class="line">http:&#x2F;&#x2F;redisdoc.com&#x2F;topic&#x2F;sentinel.html</span><br></pre></td></tr></table></figure>

<h1 id="sentinel架构和整体规划"><a href="#sentinel架构和整体规划" class="headerlink" title="sentinel架构和整体规划"></a>sentinel架构和整体规划</h1><h2 id="sentinel模式的整体架构"><a href="#sentinel模式的整体架构" class="headerlink" title="sentinel模式的整体架构"></a>sentinel模式的整体架构</h2><p><img src="https://jxdw.github.io/img/business/redis/redis_sentinel_architectrue.png"></p>
<h2 id="部署整体规划"><a href="#部署整体规划" class="headerlink" title="部署整体规划"></a>部署整体规划</h2><h3 id="redis-server节点"><a href="#redis-server节点" class="headerlink" title="redis-server节点"></a>redis-server节点</h3><p>一主两从(生产环境不要部署在一台机器上，从概率学的角度，风险很大):</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">master: 192.168.172.4:7001</span><br><span class="line">slave1: 192.168.172.4:7002</span><br><span class="line">slave2: 192.168.172.4:7003</span><br></pre></td></tr></table></figure>
<h3 id="redis-sentinel节点"><a href="#redis-sentinel节点" class="headerlink" title="redis-sentinel节点"></a>redis-sentinel节点</h3><p>三个节点(生产环境不要部署在一台机器上，从概率学的角度，风险很大):</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">node1: 192.168.172.7:27001</span><br><span class="line">node2: 192.168.172.7:27002</span><br><span class="line">mode3: 192.168.172.7:27003</span><br></pre></td></tr></table></figure>

<h1 id="编译、安装、配置和启动"><a href="#编译、安装、配置和启动" class="headerlink" title="编译、安装、配置和启动"></a>编译、安装、配置和启动</h1><h2 id="编译安装"><a href="#编译安装" class="headerlink" title="编译安装"></a>编译安装</h2><p>编译安装参考<a target="_blank" rel="noopener" href="https://youxia999.github.io/2019/04/19/redis-5-0-install/#%E4%B8%8B%E8%BD%BD%E3%80%81%E8%A7%A3%E5%8E%8B%E3%80%81%E7%BC%96%E8%AF%91">单节点安装redis 5.0集群</a>。</p>
<h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><h3 id="master节点配置"><a href="#master节点配置" class="headerlink" title="master节点配置"></a>master节点配置</h3><p>cat /data/redis/conf/redis7001.conf</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#redis监听的本地IP地址</span><br><span class="line">bind 192.168.172.4</span><br><span class="line">#监听端口</span><br><span class="line">port 7001</span><br><span class="line">#开启后台运行，no表示运行在前台</span><br><span class="line">daemonize yes</span><br><span class="line">#pid文件，另一个节点改为7002</span><br><span class="line">pidfile &#x2F;var&#x2F;run&#x2F;redis_7001.pid</span><br><span class="line">#开启aof日志，每次写操作都会记录一条日志</span><br><span class="line">appendonly yes</span><br><span class="line">appendfilename &quot;appendonly7001.aof&quot;</span><br><span class="line">#开启集群，把注释去掉</span><br><span class="line">cluster-enabled no</span><br><span class="line">dbfilename dump7001.rdb</span><br></pre></td></tr></table></figure>

<h3 id="slave1节点配置"><a href="#slave1节点配置" class="headerlink" title="slave1节点配置"></a>slave1节点配置</h3><p>cat /data/redis/conf/redis7002.conf</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#redis监听的本地IP地址</span><br><span class="line">bind 192.168.172.4</span><br><span class="line">#监听端口</span><br><span class="line">port 7002</span><br><span class="line">#开启后台运行，no表示运行在前台</span><br><span class="line">daemonize yes</span><br><span class="line">#pid文件，另一个节点改为7002</span><br><span class="line">pidfile &#x2F;var&#x2F;run&#x2F;redis_7002.pid</span><br><span class="line">#开启aof日志，每次写操作都会记录一条日志</span><br><span class="line">appendonly yes</span><br><span class="line">appendfilename &quot;appendonly7002.aof&quot;</span><br><span class="line">#开启集群，把注释去掉</span><br><span class="line">cluster-enabled no</span><br><span class="line">dbfilename dump7002.rdb</span><br><span class="line">replicaof 192.168.172.4 7001</span><br></pre></td></tr></table></figure>

<h3 id="slave2节点配置"><a href="#slave2节点配置" class="headerlink" title="slave2节点配置"></a>slave2节点配置</h3><p>cat /data/redis/conf/redis7003.conf</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#redis监听的本地IP地址</span><br><span class="line">bind 192.168.172.4</span><br><span class="line">#监听端口</span><br><span class="line">port 7003</span><br><span class="line">#开启后台运行，no表示运行在前台</span><br><span class="line">daemonize yes</span><br><span class="line">#pid文件，另一个节点改为7002</span><br><span class="line">pidfile &#x2F;var&#x2F;run&#x2F;redis_7003.pid</span><br><span class="line">#开启aof日志，每次写操作都会记录一条日志</span><br><span class="line">appendonly yes</span><br><span class="line">appendfilename &quot;appendonly7003.aof&quot;</span><br><span class="line">#开启集群，把注释去掉</span><br><span class="line">cluster-enabled no</span><br><span class="line">dbfilename dump7003.rdb</span><br><span class="line">replicaof 192.168.172.4 7001</span><br></pre></td></tr></table></figure>

<h3 id="sentinel服务节点1配置"><a href="#sentinel服务节点1配置" class="headerlink" title="sentinel服务节点1配置"></a>sentinel服务节点1配置</h3><p>cat conf/sentinel27001.conf</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">protected-mode no</span><br><span class="line">port 27001</span><br><span class="line">daemonize yes</span><br><span class="line">pidfile &quot;&#x2F;data&#x2F;redis&#x2F;sentinel27001&#x2F;sentinel.pid&quot;</span><br><span class="line">logfile &quot;&#x2F;data&#x2F;redis&#x2F;sentinel27001&#x2F;27001.log&quot;</span><br><span class="line">dir &quot;&#x2F;data&#x2F;redis&#x2F;sentinel27001&quot;</span><br><span class="line">#sentinel auth-pass master7000 ibethfy</span><br><span class="line">sentinel monitor master7001 192.168.172.4 7001 2</span><br><span class="line"># Generated by CONFIG REWRITE</span><br><span class="line">sentinel down-after-milliseconds master7001 5000</span><br><span class="line">sentinel failover-timeout master7001 30000</span><br></pre></td></tr></table></figure>

<h3 id="sentinel服务节点2配置"><a href="#sentinel服务节点2配置" class="headerlink" title="sentinel服务节点2配置"></a>sentinel服务节点2配置</h3><p>cat conf/sentinel27002.conf</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">protected-mode no</span><br><span class="line">port 27002</span><br><span class="line">daemonize yes</span><br><span class="line">pidfile &quot;&#x2F;data&#x2F;redis&#x2F;sentinel27002&#x2F;sentinel.pid&quot;</span><br><span class="line">logfile &quot;&#x2F;data&#x2F;redis&#x2F;sentinel27002&#x2F;27002.log&quot;</span><br><span class="line">dir &quot;&#x2F;data&#x2F;redis&#x2F;sentinel27002&quot;</span><br><span class="line">#sentinel auth-pass master7000 ibethfy</span><br><span class="line">sentinel monitor master7001 192.168.172.4 7001 2</span><br><span class="line"># Generated by CONFIG REWRITE</span><br><span class="line">sentinel down-after-milliseconds master7001 5000</span><br><span class="line">sentinel failover-timeout master7001 30000</span><br></pre></td></tr></table></figure>

<h3 id="sentinel服务节点3配置"><a href="#sentinel服务节点3配置" class="headerlink" title="sentinel服务节点3配置"></a>sentinel服务节点3配置</h3><p>cat conf/sentinel27003.conf</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">protected-mode no</span><br><span class="line">port 27003</span><br><span class="line">daemonize yes</span><br><span class="line">pidfile &quot;&#x2F;data&#x2F;redis&#x2F;sentinel27003&#x2F;sentinel.pid&quot;</span><br><span class="line">logfile &quot;&#x2F;data&#x2F;redis&#x2F;sentinel27003&#x2F;27003.log&quot;</span><br><span class="line">dir &quot;&#x2F;data&#x2F;redis&#x2F;sentinel27003&quot;</span><br><span class="line">#sentinel auth-pass master7001 ibethfy</span><br><span class="line">sentinel monitor master7001 192.168.172.4 7001 2</span><br><span class="line"># Generated by CONFIG REWRITE</span><br><span class="line">sentinel down-after-milliseconds master7001 5000</span><br><span class="line">sentinel failover-timeout master7001 30000</span><br></pre></td></tr></table></figure>

<h3 id="疑惑"><a href="#疑惑" class="headerlink" title="疑惑"></a>疑惑</h3><p>在没有相互配置地址的时候，三个sentinel节点之间怎么相互发现呢。从官网看下说明：<br><img src="https://jxdw.github.io/img/business/redis/redis_sentinel_hello.png"></p>
<h2 id="启动服务"><a href="#启动服务" class="headerlink" title="启动服务"></a>启动服务</h2><p>启动master节点： </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">redis-server &#x2F;data&#x2F;redis&#x2F;conf&#x2F;redis7001.conf</span><br></pre></td></tr></table></figure>
<p>启动slave1节点： </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">redis-server &#x2F;data&#x2F;redis&#x2F;conf&#x2F;redis7002.conf</span><br></pre></td></tr></table></figure>
<p>启动slave2节点： </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">redis-server &#x2F;data&#x2F;redis&#x2F;conf&#x2F;redis7003.conf</span><br></pre></td></tr></table></figure>
<p>启动sentinel节点1： </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">redis-sentinel &#x2F;data&#x2F;redis&#x2F;conf&#x2F;sentinel27001.conf</span><br></pre></td></tr></table></figure>
<p>启动sentinel节点2： </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">redis-sentinel &#x2F;data&#x2F;redis&#x2F;conf&#x2F;sentinel27002.conf</span><br></pre></td></tr></table></figure>
<p>启动sentinel节点3： </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">redis-sentinel &#x2F;data&#x2F;redis&#x2F;conf&#x2F;sentinel27003.conf</span><br></pre></td></tr></table></figure>

<h1 id="体验"><a href="#体验" class="headerlink" title="体验"></a>体验</h1><h2 id="redis主从情况"><a href="#redis主从情况" class="headerlink" title="redis主从情况"></a>redis主从情况</h2><p><img src="https://jxdw.github.io/img/business/redis/redis5.0_master_slave_info.png"></p>
<h2 id="sentinel服务情况"><a href="#sentinel服务情况" class="headerlink" title="sentinel服务情况"></a>sentinel服务情况</h2><p><img src="https://jxdw.github.io/img/business/redis/redis5.0_sentinel_master_master7001.png"></p>
<h2 id="sentinel之间怎么相互发现的"><a href="#sentinel之间怎么相互发现的" class="headerlink" title="sentinel之间怎么相互发现的"></a>sentinel之间怎么相互发现的</h2><p><img src="https://jxdw.github.io/img/business/redis/redis5.0_subcribe_hello.png"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://jxdw.github.io/2019/05/12/spring-architecture/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/favicon.png">
      <meta itemprop="name" content="渐学顿悟">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="渐学顿悟">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/05/12/spring-architecture/" class="post-title-link" itemprop="url">【java框架系列】关于java学习的阶段性思考</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-05-12 21:46:07 21:46:07" itemprop="dateCreated datePublished" datetime="2019-05-12T21:46:07+08:00">2019-05-12 21:46:07</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2020-10-13 22:09:22 22:09:22" itemprop="dateModified" datetime="2020-10-13T22:09:22+08:00">2020-10-13 22:09:22</time>
      </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2019/05/12/spring-architecture/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2019/05/12/spring-architecture/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>最近有学PHP的朋友想转到java（说公司要求用spring boot做项目），问我有没有什么捷径或者经验，给他一个换语言的学习指引。<br>看得出来，他还没有搭建自己的知识体系，我就趁机给他灌输一个观念：先要有完整的知识体系结构（或者通用技术架构），然后编程语言只是工具，是可以被替换的。当然，这不是我的原创，是一些前辈告诉我的（我相信很多高手都会觉得:语言都是工具,架构模式才是关键。用java写的，用go语言、Python也可以，只是效果、代码管理、维护性的差异）。<br>当然，计算机是讲究动手的学科，不能空谈理论，得输出点东西才可信，然后基于本人最近的一些思考（看了几张别人spring全家桶教程的ppt），画了一张整体架构图给朋友。<br>并且告知：java是可以被换成go、python语言实现的，就看技术决策者熟悉哪门语言、以及要实现什么样的系统（其实是废话：单讲语言生态，目前java确实是生态最好的语言，尤其是在spring的助攻下。呵呵）<br><img src="https://jxdw.github.io/img/architecture/spring_architecture.png"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://jxdw.github.io/2019/05/12/centos8-base-rhel8-release/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/favicon.png">
      <meta itemprop="name" content="渐学顿悟">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="渐学顿悟">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/05/12/centos8-base-rhel8-release/" class="post-title-link" itemprop="url">【操作系统知识体系】RHEL8发布，坐等centos8</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-05-12 13:24:41 13:24:41" itemprop="dateCreated datePublished" datetime="2019-05-12T13:24:41+08:00">2019-05-12 13:24:41</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2020-10-13 22:06:21 22:06:21" itemprop="dateModified" datetime="2020-10-13T22:06:21+08:00">2020-10-13 22:06:21</time>
      </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2019/05/12/centos8-base-rhel8-release/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2019/05/12/centos8-base-rhel8-release/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="背景和参考资料"><a href="#背景和参考资料" class="headerlink" title="背景和参考资料"></a>背景和参考资料</h1><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">https:&#x2F;&#x2F;access.redhat.com&#x2F;documentation&#x2F;en-us&#x2F;red_hat_enterprise_linux&#x2F;8&#x2F;html-single&#x2F;8.0_release_notes&#x2F;index</span><br><span class="line">https:&#x2F;&#x2F;access.redhat.com&#x2F;documentation&#x2F;zh-cn&#x2F;red_hat_enterprise_linux&#x2F;8&#x2F;html-single&#x2F;8.0_release_notes&#x2F;index(机器翻译版)</span><br><span class="line">https:&#x2F;&#x2F;blog.51cto.com&#x2F;vanehsuan&#x2F;2392207</span><br><span class="line">https:&#x2F;&#x2F;www.itzgeek.com&#x2F;how-tos&#x2F;linux&#x2F;centos-how-tos&#x2F;how-to-install-mysql-8-0-on-rhel-8.html</span><br></pre></td></tr></table></figure>

<h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>正文上面的参考资料所说，5月7号，红帽子公司发布了REDHAT ENTERPRISE LINUX 8(简称RHEL8)。<br>于是乎，想先体验一把新特性和原有功能，为后面的centos8做技术储备。</p>
<h2 id="rhel8的release-note"><a href="#rhel8的release-note" class="headerlink" title="rhel8的release note"></a>rhel8的release note</h2><p><img src="https://jxdw.github.io/img/devops/centos7/rhel8_release_notes.png"></p>
<h1 id="虚拟机安装RHEL8"><a href="#虚拟机安装RHEL8" class="headerlink" title="虚拟机安装RHEL8"></a>虚拟机安装RHEL8</h1><h2 id="下载RHEL8镜像"><a href="#下载RHEL8镜像" class="headerlink" title="下载RHEL8镜像"></a>下载RHEL8镜像</h2><p>注册一个redhat的账号，从官网下载RHEL8</p>
<h2 id="虚拟机安装RHEL8-1"><a href="#虚拟机安装RHEL8-1" class="headerlink" title="虚拟机安装RHEL8"></a>虚拟机安装RHEL8</h2><p>参考<a target="_blank" rel="noopener" href="https://blog.51cto.com/vanehsuan/2392207%E5%81%9A%E4%B8%8B%E7%89%88%E6%9C%AC%E7%9A%84%E9%80%89%E6%8B%A9%EF%BC%8C%E7%A3%81%E7%9B%98%E7%9A%84%E9%80%89%E6%8B%A9%EF%BC%8C%E6%95%B4%E4%B8%AA%E8%BF%87%E7%A8%8B%E8%BF%98%E6%98%AF%E6%AF%94%E8%BE%83%E9%A1%BA%E7%95%85%E3%80%82">https://blog.51cto.com/vanehsuan/2392207做下版本的选择，磁盘的选择，整个过程还是比较顺畅。</a></p>
<p>#安装后的初步体验</p>
<h2 id="内核版本"><a href="#内核版本" class="headerlink" title="内核版本"></a>内核版本</h2><p>采用的之前beta版本用的4.18版本（内核社区好像没有提供本版本的长期支持版）<br><img src="https://jxdw.github.io/img/devops/centos7/rhel8_uname.png"></p>
<h2 id="注册账号订阅仓库"><a href="#注册账号订阅仓库" class="headerlink" title="注册账号订阅仓库"></a>注册账号订阅仓库</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">subscription-manager register --username 红帽子账号 --password 密码 --auto-attach</span><br><span class="line">subscription-manager repos --list-enabled</span><br></pre></td></tr></table></figure>

<h2 id="安装mysql8-0"><a href="#安装mysql8-0" class="headerlink" title="安装mysql8.0"></a>安装mysql8.0</h2><p>简单安装</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">dnf clean packages</span><br><span class="line">yum -y install @mysql</span><br><span class="line">systemctl start mysqld</span><br></pre></td></tr></table></figure>
<p><img src="https://jxdw.github.io/img/devops/centos7/rhel8_mysql.png"><br>查看日志</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">2019-05-12T12:45:20.890020Z 0 [System] [MY-013169] [Server] &#x2F;usr&#x2F;libexec&#x2F;mysqld (mysqld 8.0.13) initializing of server in progress as process 40113</span><br><span class="line">2019-05-12T12:45:23.643786Z 5 [Warning] [MY-010453] [Server] root@localhost is created with an empty password ! Please consider switching off the --initialize-insecure option.</span><br><span class="line">2019-05-12T12:45:26.199807Z 0 [System] [MY-013170] [Server] &#x2F;usr&#x2F;libexec&#x2F;mysqld (mysqld 8.0.13) initializing of server has completed</span><br><span class="line">2019-05-12T12:45:28.821217Z 0 [System] [MY-010116] [Server] &#x2F;usr&#x2F;libexec&#x2F;mysqld (mysqld 8.0.13) starting as process 40159</span><br><span class="line">2019-05-12T12:45:29.877569Z 0 [Warning] [MY-010068] [Server] CA certificate ca.pem is self signed.</span><br><span class="line">2019-05-12T12:45:29.987015Z 0 [System] [MY-010931] [Server] &#x2F;usr&#x2F;libexec&#x2F;mysqld: ready for connections. Version: &#39;8.0.13&#39;  socket: &#39;&#x2F;var&#x2F;lib&#x2F;mysql&#x2F;mysql.sock&#39;  port: 3306  Source distribution.</span><br><span class="line">2019-05-12T12:45:30.206112Z 0 [System] [MY-011323] [Server] X Plugin ready for connections. Socket: &#39;&#x2F;var&#x2F;lib&#x2F;mysql&#x2F;mysqlx.sock&#39; bind-address: &#39;::&#39; port: 33060</span><br></pre></td></tr></table></figure>
<p>知道mysql8的root账号密码为空，所以需要登录后，初始化密码。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">alter user &#39;root&#39;@&#39;localhost&#39; identified with mysql_native_password by &#39;123456&#39;;</span><br><span class="line">update user set host&#x3D;&#39;%&#39; where user&#x3D;&#39;root&#39;;</span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure>

<h1 id="初步结论"><a href="#初步结论" class="headerlink" title="初步结论"></a>初步结论</h1><p> 软件安装这块，除了增加appstream的概念，已经源的控制，和centos7没有太大的差别。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://jxdw.github.io/2019/04/19/redis-5-0-install/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/favicon.png">
      <meta itemprop="name" content="渐学顿悟">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="渐学顿悟">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/04/19/redis-5-0-install/" class="post-title-link" itemprop="url">【redis使用系列】单节点安装redis 5.0集群</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-04-19 16:46:12 16:46:12" itemprop="dateCreated datePublished" datetime="2019-04-19T16:46:12+08:00">2019-04-19 16:46:12</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2020-10-13 23:23:37 23:23:37" itemprop="dateModified" datetime="2020-10-13T23:23:37+08:00">2020-10-13 23:23:37</time>
      </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2019/04/19/redis-5-0-install/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2019/04/19/redis-5-0-install/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><h2 id="主要参考资料"><a href="#主要参考资料" class="headerlink" title="主要参考资料"></a>主要参考资料</h2><p><a target="_blank" rel="noopener" href="https://blog.51cto.com/andyxu/2319767">https://blog.51cto.com/andyxu/2319767</a><br><a target="_blank" rel="noopener" href="https://www.oschina.net/news/100931/redis-5-0-released">https://www.oschina.net/news/100931/redis-5-0-released</a></p>
<h2 id="redis-5-0主要的特性"><a href="#redis-5-0主要的特性" class="headerlink" title="redis 5.0主要的特性"></a>redis 5.0主要的特性</h2><p>最吸引我的可能就是第二点。要知道基于ruby的集群方案，真的比较让人酸爽。<br><img src="https://jxdw.github.io/img/business/redis/redis5.0_feature.png"></p>
<h1 id="安装过程"><a href="#安装过程" class="headerlink" title="安装过程"></a>安装过程</h1><h2 id="下载、解压、编译"><a href="#下载、解压、编译" class="headerlink" title="下载、解压、编译"></a>下载、解压、编译</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">yum -y install make gcc gcc-c++ wget</span><br><span class="line">wget http:&#x2F;&#x2F;download.redis.io&#x2F;releases&#x2F;redis-5.0.0.tar.gz</span><br><span class="line">tar zxvf redis-5.0.0.tar.gz</span><br><span class="line">cd redis-5.0.0&#x2F;</span><br><span class="line">make &amp;&amp; make install PREFIX&#x3D;&#x2F;data&#x2F;redis</span><br><span class="line">echo &quot;export PATH&#x3D;$PATH:&#x2F;data&#x2F;redis&#x2F;bin&quot; &gt;&gt; &#x2F;etc&#x2F;profile</span><br><span class="line">source &#x2F;etc&#x2F;profile</span><br></pre></td></tr></table></figure>
<h2 id="redis客户端命令"><a href="#redis客户端命令" class="headerlink" title="redis客户端命令"></a>redis客户端命令</h2><p><img src="https://jxdw.github.io/img/business/redis/redis5.0_rediscli_command.png"></p>
<h1 id="redis集群配置"><a href="#redis集群配置" class="headerlink" title="redis集群配置"></a>redis集群配置</h1><h2 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h2><h3 id="7001端口"><a href="#7001端口" class="headerlink" title="7001端口"></a>7001端口</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#redis监听的本地IP地址</span><br><span class="line">bind 192.168.128.54</span><br><span class="line"></span><br><span class="line">#监听端口</span><br><span class="line">port 7001</span><br><span class="line"></span><br><span class="line">#开启后台运行，no表示运行在前台</span><br><span class="line">daemonize yes</span><br><span class="line"></span><br><span class="line">#pid文件，另一个节点改为7002</span><br><span class="line">pidfile &#x2F;var&#x2F;run&#x2F;redis_7001.pid</span><br><span class="line"></span><br><span class="line">#开启aof日志，每次写操作都会记录一条日志</span><br><span class="line">appendonly yes</span><br><span class="line"></span><br><span class="line">appendfilename &quot;appendonly7001.aof&quot;</span><br><span class="line"></span><br><span class="line">#开启集群，把注释去掉</span><br><span class="line">cluster-enabled yes</span><br><span class="line"></span><br><span class="line">dbfilename dump7001.rdb</span><br><span class="line"></span><br><span class="line">#集群的配置文件，首次启动会自动创建</span><br><span class="line">cluster-config-file nodes-7001.conf   </span><br><span class="line"></span><br><span class="line">#集群节点连接超时时间，15秒</span><br><span class="line">cluster-node-timeout 15000</span><br></pre></td></tr></table></figure>

<h3 id="7002端口"><a href="#7002端口" class="headerlink" title="7002端口"></a>7002端口</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#redis监听的本地IP地址</span><br><span class="line">bind 192.168.128.54</span><br><span class="line"></span><br><span class="line">#监听端口</span><br><span class="line">port 7002</span><br><span class="line"></span><br><span class="line">#开启后台运行，no表示运行在前台</span><br><span class="line">daemonize yes</span><br><span class="line"></span><br><span class="line">#pid文件</span><br><span class="line">pidfile &#x2F;var&#x2F;run&#x2F;redis_7002.pid</span><br><span class="line"></span><br><span class="line">#开启aof日志，每次写操作都会记录一条日志</span><br><span class="line">appendonly yes</span><br><span class="line"></span><br><span class="line">appendfilename &quot;appendonly7002.aof&quot;</span><br><span class="line"></span><br><span class="line">dbfilename dump7002.rdb</span><br><span class="line"></span><br><span class="line">#开启集群，把注释#去掉</span><br><span class="line">cluster-enabled yes</span><br><span class="line"></span><br><span class="line">#集群的配置文件，首次启动会自动创建</span><br><span class="line">cluster-config-file nodes-7002.conf</span><br><span class="line"></span><br><span class="line">#集群节点连接超时时间，15秒</span><br><span class="line">cluster-node-timeout 15000</span><br></pre></td></tr></table></figure>

<h3 id="7003端口"><a href="#7003端口" class="headerlink" title="7003端口"></a>7003端口</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#redis监听的本地IP地址</span><br><span class="line">bind 192.168.128.54</span><br><span class="line"></span><br><span class="line">#监听端口</span><br><span class="line">port 7003</span><br><span class="line"></span><br><span class="line">#开启后台运行，no表示运行在前台</span><br><span class="line">daemonize yes</span><br><span class="line"></span><br><span class="line">#pid文件，另一个节点改为7002</span><br><span class="line">pidfile &#x2F;var&#x2F;run&#x2F;redis_7003.pid</span><br><span class="line"></span><br><span class="line">#开启aof日志，每次写操作都会记录一条日志</span><br><span class="line">appendonly yes</span><br><span class="line"></span><br><span class="line">appendfilename &quot;appendonly7003.aof&quot;</span><br><span class="line"></span><br><span class="line">dbfilename dump7003.rdb</span><br><span class="line"></span><br><span class="line">#开启集群，把注释#去掉</span><br><span class="line">cluster-enabled yes</span><br><span class="line"></span><br><span class="line">#集群的配置文件，首次启动会自动创建</span><br><span class="line">cluster-config-file nodes-7003.conf</span><br><span class="line"></span><br><span class="line">#集群节点连接超时时间，15秒</span><br><span class="line">cluster-node-timeout 15000</span><br></pre></td></tr></table></figure>

<h3 id="7004端口"><a href="#7004端口" class="headerlink" title="7004端口"></a>7004端口</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#redis监听的本地IP地址</span><br><span class="line">bind 192.168.128.54</span><br><span class="line"></span><br><span class="line">#监听端口</span><br><span class="line">port 7004</span><br><span class="line"></span><br><span class="line">#开启后台运行，no表示运行在前台</span><br><span class="line">daemonize yes</span><br><span class="line"></span><br><span class="line">#pid文件，另一个节点改为7002</span><br><span class="line">pidfile &#x2F;var&#x2F;run&#x2F;redis_7004.pid</span><br><span class="line"></span><br><span class="line">#开启aof日志，每次写操作都会记录一条日志</span><br><span class="line">appendonly yes</span><br><span class="line"></span><br><span class="line">appendfilename &quot;appendonly7004.aof&quot;</span><br><span class="line"></span><br><span class="line">dbfilename dump7004.rdb</span><br><span class="line"></span><br><span class="line">#开启集群，把注释#去掉</span><br><span class="line">cluster-enabled yes</span><br><span class="line"></span><br><span class="line">#集群的配置文件，首次启动会自动创建</span><br><span class="line">cluster-config-file nodes-7004.conf</span><br><span class="line"></span><br><span class="line">#集群节点连接超时时间，15秒</span><br><span class="line">cluster-node-timeout 15000</span><br></pre></td></tr></table></figure>

<h3 id="7005端口"><a href="#7005端口" class="headerlink" title="7005端口"></a>7005端口</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#redis监听的本地IP地址</span><br><span class="line">bind 192.168.128.54</span><br><span class="line"></span><br><span class="line">#监听端口</span><br><span class="line">port 7005</span><br><span class="line"></span><br><span class="line">#开启后台运行，no表示运行在前台</span><br><span class="line">daemonize yes</span><br><span class="line"></span><br><span class="line">#pid文件</span><br><span class="line">pidfile &#x2F;var&#x2F;run&#x2F;redis_7005.pid</span><br><span class="line"></span><br><span class="line">#开启aof日志，每次写操作都会记录一条日志</span><br><span class="line">appendonly yes</span><br><span class="line"></span><br><span class="line">appendfilename &quot;appendonly7005.aof&quot;</span><br><span class="line"></span><br><span class="line">dbfilename dump7005.rdb</span><br><span class="line"></span><br><span class="line">#开启集群，把注释#去掉</span><br><span class="line">cluster-enabled yes</span><br><span class="line"></span><br><span class="line">#集群的配置文件，首次启动会自动创建</span><br><span class="line">cluster-config-file nodes-7005.conf</span><br><span class="line"></span><br><span class="line">#集群节点连接超时时间，15秒</span><br><span class="line">cluster-node-timeout 15000</span><br></pre></td></tr></table></figure>

<h3 id="7006端口"><a href="#7006端口" class="headerlink" title="7006端口"></a>7006端口</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#redis监听的本地IP地址</span><br><span class="line">bind 192.168.128.54</span><br><span class="line"></span><br><span class="line">#监听端口</span><br><span class="line">port 7006</span><br><span class="line"></span><br><span class="line">#开启后台运行,no表示运行在前台</span><br><span class="line">daemonize yes</span><br><span class="line"></span><br><span class="line">#pid文件</span><br><span class="line">pidfile &#x2F;var&#x2F;run&#x2F;redis_7006.pid</span><br><span class="line"></span><br><span class="line">#开启aof日志，每次写操作都会记录一条日志</span><br><span class="line">appendonly yes</span><br><span class="line"></span><br><span class="line">appendfilename &quot;appendonly7006.aof&quot;</span><br><span class="line"></span><br><span class="line">dbfilename dump7006.rdb</span><br><span class="line"></span><br><span class="line">#开启集群，把注释去掉</span><br><span class="line">cluster-enabled yes   </span><br><span class="line"></span><br><span class="line">#集群的配置文件，首次启动会自动创建</span><br><span class="line">cluster-config-file nodes-7006.conf</span><br><span class="line"></span><br><span class="line">#集群节点连接超时时间，15</span><br><span class="line">cluster-node-timeout 15000</span><br></pre></td></tr></table></figure>

<h2 id="节点启动脚本redis-all-sh"><a href="#节点启动脚本redis-all-sh" class="headerlink" title="节点启动脚本redis-all.sh"></a>节点启动脚本redis-all.sh</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#!&#x2F;bin&#x2F;bash</span><br><span class="line">&#x2F;data&#x2F;redis&#x2F;bin&#x2F;redis-server &#x2F;data&#x2F;redis&#x2F;conf&#x2F;redis7001.conf</span><br><span class="line">&#x2F;data&#x2F;redis&#x2F;bin&#x2F;redis-server &#x2F;data&#x2F;redis&#x2F;conf&#x2F;redis7002.conf</span><br><span class="line">&#x2F;data&#x2F;redis&#x2F;bin&#x2F;redis-server &#x2F;data&#x2F;redis&#x2F;conf&#x2F;redis7003.conf</span><br><span class="line">&#x2F;data&#x2F;redis&#x2F;bin&#x2F;redis-server &#x2F;data&#x2F;redis&#x2F;conf&#x2F;redis7004.conf</span><br><span class="line">&#x2F;data&#x2F;redis&#x2F;bin&#x2F;redis-server &#x2F;data&#x2F;redis&#x2F;conf&#x2F;redis7005.conf</span><br><span class="line">&#x2F;data&#x2F;redis&#x2F;bin&#x2F;redis-server &#x2F;data&#x2F;redis&#x2F;conf&#x2F;redis7006.conf</span><br></pre></td></tr></table></figure>

<h2 id="集群创建脚本redis-cluster-sh"><a href="#集群创建脚本redis-cluster-sh" class="headerlink" title="集群创建脚本redis-cluster.sh"></a>集群创建脚本redis-cluster.sh</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#!&#x2F;bin&#x2F;bash</span><br><span class="line">&#x2F;data&#x2F;redis&#x2F;bin&#x2F;redis-cli --cluster create 192.168.128.54:7001  192.168.128.54:7002 192.168.128.54:7003 192.168.128.54:7004 192.168.128.54:7005 192.168.128.54:7006 --cluster-replicas 1</span><br></pre></td></tr></table></figure>

<h2 id="启动后的文件信息"><a href="#启动后的文件信息" class="headerlink" title="启动后的文件信息"></a>启动后的文件信息</h2><p><img src="https://jxdw.github.io/img/business/redis/redis5.0_file.png"></p>
<h1 id="体验redis集群"><a href="#体验redis集群" class="headerlink" title="体验redis集群"></a>体验redis集群</h1><p><img src="https://jxdw.github.io/img/business/redis/redis5.0_infocommand.png"><br><img src="https://jxdw.github.io/img/business/redis/redis5.0_clusterinfo.png"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://jxdw.github.io/2019/04/13/percona-xtrabackup-for-mysql-8-0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/favicon.png">
      <meta itemprop="name" content="渐学顿悟">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="渐学顿悟">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/04/13/percona-xtrabackup-for-mysql-8-0/" class="post-title-link" itemprop="url">【mysql知识体系】percona-xtrabackup 8.0安装和初步使用</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-04-13 12:58:32 12:58:32" itemprop="dateCreated datePublished" datetime="2019-04-13T12:58:32+08:00">2019-04-13 12:58:32</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2020-10-10 23:11:34 23:11:34" itemprop="dateModified" datetime="2020-10-10T23:11:34+08:00">2020-10-10 23:11:34</time>
      </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2019/04/13/percona-xtrabackup-for-mysql-8-0/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2019/04/13/percona-xtrabackup-for-mysql-8-0/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">https:&#x2F;&#x2F;blog.csdn.net&#x2F;wfs1994&#x2F;article&#x2F;details&#x2F;80396604</span><br></pre></td></tr></table></figure>

<h2 id="官方文档"><a href="#官方文档" class="headerlink" title="官方文档"></a>官方文档</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">https:&#x2F;&#x2F;www.percona.com&#x2F;doc&#x2F;percona-xtrabackup&#x2F;8.0&#x2F;index.html</span><br><span class="line">https:&#x2F;&#x2F;www.percona.com&#x2F;doc&#x2F;percona-xtrabackup&#x2F;8.0&#x2F;installation.html#installing-percona-xtrabackup-from-repositories</span><br><span class="line">https:&#x2F;&#x2F;www.percona.com&#x2F;doc&#x2F;percona-xtrabackup&#x2F;8.0&#x2F;installation&#x2F;yum_repo.html</span><br><span class="line">https:&#x2F;&#x2F;www.percona.com&#x2F;doc&#x2F;percona-xtrabackup&#x2F;8.0&#x2F;using_xtrabackup&#x2F;privileges.html</span><br><span class="line">https:&#x2F;&#x2F;www.percona.com&#x2F;doc&#x2F;percona-xtrabackup&#x2F;8.0&#x2F;backup_scenarios&#x2F;full_backup.html</span><br></pre></td></tr></table></figure>

<h1 id="xtrabackup简介与安装"><a href="#xtrabackup简介与安装" class="headerlink" title="xtrabackup简介与安装"></a>xtrabackup简介与安装</h1><h2 id="xtrabackup简介"><a href="#xtrabackup简介" class="headerlink" title="xtrabackup简介"></a>xtrabackup简介</h2><p><img src="https://jxdw.github.io/img/business/mysql/8.0_xtrabackup_introduce.png"></p>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">wget https:&#x2F;&#x2F;www.percona.com&#x2F;downloads&#x2F;XtraBackup&#x2F;Percona-XtraBackup-8.0.4&#x2F;binary&#x2F;redhat&#x2F;7&#x2F;x86_64&#x2F;percona-xtrabackup-80-8.0.4-1.el7.x86_64.rpm</span><br><span class="line">yum localinstall percona-xtrabackup-80-8.0.4-1.el7.x86_64.rpm </span><br></pre></td></tr></table></figure>

<h1 id="授权和备份操作"><a href="#授权和备份操作" class="headerlink" title="授权和备份操作"></a>授权和备份操作</h1><h2 id="授权操作"><a href="#授权操作" class="headerlink" title="授权操作"></a>授权操作</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">CREATE USER &#39;backupuser&#39;@&#39;%&#39; IDENTIFIED with mysql_native_password BY &#39;123456&#39;;</span><br><span class="line">GRANT BACKUP_ADMIN, PROCESS, RELOAD, LOCK TABLES, REPLICATION CLIENT ON *.* TO &#39;backupuser&#39;@&#39;%&#39;;</span><br><span class="line">GRANT SELECT ON performance_schema.log_status TO &#39;backupuser&#39;@&#39;%&#39;;</span><br><span class="line">FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure>

<h2 id="备份操作"><a href="#备份操作" class="headerlink" title="备份操作"></a>备份操作</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">xtrabackup --host&#x3D;192.168.128.54 --port&#x3D;3306 --user&#x3D;backupuser --password&#x3D;123456 --backup --target-dir&#x3D;&#x2F;data&#x2F;backup&#x2F;percona8.0</span><br></pre></td></tr></table></figure>

<h2 id="查看备份结果"><a href="#查看备份结果" class="headerlink" title="查看备份结果"></a>查看备份结果</h2><p><img src="https://jxdw.github.io/img/business/mysql/8.0_xtrabackup.png"></p>
<h2 id="适用场景"><a href="#适用场景" class="headerlink" title="适用场景"></a>适用场景</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">percona xtrabackup 8.0适合mysql&#x2F;percona 8.0版本，如果是mysql 5.6&#x2F;5.7版本，请参考官方的xtrabackup 2.4版本。</span><br></pre></td></tr></table></figure>

<p>未完待续。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://jxdw.github.io/2019/04/01/centos7-kernel-upgrade/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/favicon.png">
      <meta itemprop="name" content="渐学顿悟">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="渐学顿悟">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/04/01/centos7-kernel-upgrade/" class="post-title-link" itemprop="url">【操作系统知识体系】centos7内核升级</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-04-01 21:12:52 21:12:52" itemprop="dateCreated datePublished" datetime="2019-04-01T21:12:52+08:00">2019-04-01 21:12:52</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2020-10-13 22:06:21 22:06:21" itemprop="dateModified" datetime="2020-10-13T22:06:21+08:00">2020-10-13 22:06:21</time>
      </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2019/04/01/centos7-kernel-upgrade/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2019/04/01/centos7-kernel-upgrade/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">https:&#x2F;&#x2F;linux.cn&#x2F;article-8310-1.html</span><br></pre></td></tr></table></figure>

<h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><p>基于以下三点，让我有种升级内核的冲动：<br>1.docker容器近期暴露的漏洞，问了”专家”说是都是内核的问题。<br>2.centos7还是用的3.10，centos8（RHEL用的是4.18版本）发布时间表还不知道。<br>3.linux的内核稳定版本已经到5.0.X。</p>
<h1 id="升级步骤"><a href="#升级步骤" class="headerlink" title="升级步骤"></a>升级步骤</h1><h2 id="检查已安装版本"><a href="#检查已安装版本" class="headerlink" title="检查已安装版本"></a>检查已安装版本</h2><p><img src="https://jxdw.github.io/img/devops/centos7/centos7_uname.png"><br>修改下hostname先。</p>
<h2 id="升级内核"><a href="#升级内核" class="headerlink" title="升级内核"></a>升级内核</h2><p><img src="https://jxdw.github.io/img/devops/centos7/kernel-ml-x86_64.png"><br><img src="https://jxdw.github.io/img/devops/centos7/install_kernel_ml.png"><br><img src="https://jxdw.github.io/img/devops/centos7/grub.png"><br>然后reboot。</p>
<h1 id="结果"><a href="#结果" class="headerlink" title="结果"></a>结果</h1><p><img src="https://jxdw.github.io/img/devops/centos7/v5_uname.png"></p>
<h1 id="建议"><a href="#建议" class="headerlink" title="建议"></a>建议</h1><p>在新操作系统安装好以后，就先yum update、然后升级内核。<br>再安装其他的数据库、中间件、(java、go、python、ruby、erlang)语言runtime。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://jxdw.github.io/2019/03/31/rhel8-beta-experience/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/favicon.png">
      <meta itemprop="name" content="渐学顿悟">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="渐学顿悟">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/03/31/rhel8-beta-experience/" class="post-title-link" itemprop="url">【操作系统知识体系】rhel8 beta尝鲜</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-03-31 22:54:07 22:54:07" itemprop="dateCreated datePublished" datetime="2019-03-31T22:54:07+08:00">2019-03-31 22:54:07</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2020-10-13 22:06:21 22:06:21" itemprop="dateModified" datetime="2020-10-13T22:06:21+08:00">2020-10-13 22:06:21</time>
      </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2019/03/31/rhel8-beta-experience/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2019/03/31/rhel8-beta-experience/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">https:&#x2F;&#x2F;zocodev.com&#x2F;red-hat-enterprise-linux-8-beta.html</span><br><span class="line">https:&#x2F;&#x2F;zhuanlan.zhihu.com&#x2F;p&#x2F;56892392</span><br><span class="line">http:&#x2F;&#x2F;www.sohu.com&#x2F;a&#x2F;294442178_194621</span><br><span class="line">https:&#x2F;&#x2F;ywnz.com&#x2F;linuxjc&#x2F;3705.html</span><br><span class="line">https:&#x2F;&#x2F;www.kclouder.cn&#x2F;rhel8-beta-experience&#x2F;</span><br></pre></td></tr></table></figure>
<h1 id="安装过程"><a href="#安装过程" class="headerlink" title="安装过程"></a>安装过程</h1><h2 id="安装过程概述"><a href="#安装过程概述" class="headerlink" title="安装过程概述"></a>安装过程概述</h2><ul>
<li>下载iso文件，准备安装</li>
<li>安装VMware 15.0 pro，并修改配置文件</li>
<li>初步安装完成后体验，发现网络没有配置，要配置网络</li>
<li>初步安装完成后体验，发现没有界面，要安装Workstation，而要安装Workstation，就需要先有注册帐号</li>
</ul>
<h2 id="下载iso文件，准备安装"><a href="#下载iso文件，准备安装" class="headerlink" title="下载iso文件，准备安装"></a>下载iso文件，准备安装</h2><p>本人从 <a target="_blank" rel="noopener" href="https://access.cdn.redhat.com/content/origin/files/sha256/06/06bec9e7de3ebfcdb879804be8c452b69ba3e046daedac3731e1ccd169cfd316/rhel-8.0-beta-1-x86_64-dvd.iso?_auth_=1556668800_f465a37d228dfb88281c7cf7e9f8446f">https://access.cdn.redhat.com/content/origin/files/sha256/06/06bec9e7de3ebfcdb879804be8c452b69ba3e046daedac3731e1ccd169cfd316/rhel-8.0-beta-1-x86_64-dvd.iso?_auth_=1556668800_f465a37d228dfb88281c7cf7e9f8446f</a> 下载的iso文件。</p>
<h2 id="安装VMware15-0，并修改配置文件"><a href="#安装VMware15-0，并修改配置文件" class="headerlink" title="安装VMware15.0，并修改配置文件"></a>安装VMware15.0，并修改配置文件</h2><p>安装VMware15.0，并加载iso文件，安装rhel8beta。会发现找不到本地磁盘，需要参考 <a target="_blank" rel="noopener" href="https://ywnz.com/linuxjc/3705.html">https://ywnz.com/linuxjc/3705.html</a> 修改配置文件，并继续安装。</p>
<h2 id="根据虚拟机的nat配置，配置网络"><a href="#根据虚拟机的nat配置，配置网络" class="headerlink" title="根据虚拟机的nat配置，配置网络"></a>根据虚拟机的nat配置，配置网络</h2><p>安装完成后，进入虚拟机体验，会发现ifconfig用不了，只能用ip a。<br>而网卡下没有ip。也就是在vmware之外，无法连接rhel服务，进行操作。<br>这时候只能参考知乎专栏进行相应的操作。<br>ip段可以看vmware的nat网络设置。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">nmcli c add type ethernet con-name ethX ifname ethX ipv4.addr 192.168.197.128 ipv4.gateway 192.168.197.1 ipv4.method manual</span><br><span class="line">nmcli c up ethX</span><br></pre></td></tr></table></figure>
<p>这时候，可以用mobaxterm等终端进行远程操作了。</p>
<h2 id="下载yum源"><a href="#下载yum源" class="headerlink" title="下载yum源"></a>下载yum源</h2><p>看了/etc/yum.repo.d/下面，基本就是空的，所以得想办法找一个yum源。谷歌一番，发现，只能用redhat官方的yum源。只能参考 <a target="_blank" rel="noopener" href="http://www.sohu.com/a/294442178_194621">http://www.sohu.com/a/294442178_194621</a> 去清华大学的镜像服务器上下载并上传到对应的目录。（注意不需要修改里面的内容）<br><img src="https://jxdw.github.io/img/devops/centos7/centos8_yumrepo.png"></p>
<h2 id="执行一个yum命令，就会提示订阅"><a href="#执行一个yum命令，就会提示订阅" class="headerlink" title="执行一个yum命令，就会提示订阅"></a>执行一个yum命令，就会提示订阅</h2><p><img src="https://jxdw.github.io/img/devops/centos7/rhel8_subscription.png"></p>
<h2 id="执行命令订阅"><a href="#执行命令订阅" class="headerlink" title="执行命令订阅"></a>执行命令订阅</h2><p>查找一番，只能去redhat官网注册帐号，并订阅。<br><img src="https://jxdw.github.io/img/devops/centos7/rhel8_subscription2.png"></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">subscription-manager register --username 帐号 --password &#39;密码&#39; --auto-attach</span><br></pre></td></tr></table></figure>

<h2 id="安装图形界面"><a href="#安装图形界面" class="headerlink" title="安装图形界面"></a>安装图形界面</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">yum groupinstall Workstation</span><br><span class="line">systemctl set-default graphical#默认启用</span><br></pre></td></tr></table></figure>
<p><img src="https://jxdw.github.io/img/devops/centos7/centos8_desktop.png"></p>
<h1 id="体验感受"><a href="#体验感受" class="headerlink" title="体验感受"></a>体验感受</h1><ul>
<li>yum被替换成dnf</li>
<li>ifconfig被替换成了nmcli，有点小难受</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://jxdw.github.io/2019/03/24/golang-gin-source-code-v1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/favicon.png">
      <meta itemprop="name" content="渐学顿悟">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="渐学顿悟">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/03/24/golang-gin-source-code-v1/" class="post-title-link" itemprop="url">【Go框架系列】gin源码分析第一版</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-03-24 12:48:30 12:48:30" itemprop="dateCreated datePublished" datetime="2019-03-24T12:48:30+08:00">2019-03-24 12:48:30</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2020-10-19 23:26:15 23:26:15" itemprop="dateModified" datetime="2020-10-19T23:26:15+08:00">2020-10-19 23:26:15</time>
      </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2019/03/24/golang-gin-source-code-v1/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2019/03/24/golang-gin-source-code-v1/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="demo源码"><a href="#demo源码" class="headerlink" title="demo源码"></a>demo源码</h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">	&quot;encoding&#x2F;json&quot;</span><br><span class="line">	&quot;fmt&quot;</span><br><span class="line">	&quot;github.com&#x2F;gin-gonic&#x2F;gin&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">type User struct &#123;</span><br><span class="line">	Id int</span><br><span class="line">	Name string</span><br><span class="line">	Age int</span><br><span class="line">&#125;</span><br><span class="line">func main()  &#123;</span><br><span class="line">	defaultServer:&#x3D;gin.New();</span><br><span class="line">	defaultServer.RouterGroup.GET(&quot;&#x2F;&quot;,defaultHandeler)</span><br><span class="line">	v1 :&#x3D; defaultServer.Group(&quot;&#x2F;v1&quot;)</span><br><span class="line">	v1.GET(&quot;&#x2F;ping&quot;,v1pingHandeler)</span><br><span class="line"></span><br><span class="line">	defaultServer.Run(&quot;:8083&quot;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">func defaultHandeler(ctx *gin.Context)  &#123;</span><br><span class="line">	ctx.JSON(200,gin.H&#123;</span><br><span class="line">		&quot;status&quot;:200,</span><br><span class="line">		&quot;success&quot;:true,</span><br><span class="line">		&quot;data&quot;:&quot;&#123;&#125;&quot;,</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;</span><br><span class="line">func v1pingHandeler(context *gin.Context) &#123;</span><br><span class="line">	user:&#x3D;User&#123;1,&quot;golang&quot;,20&#125;</span><br><span class="line">	data,_:&#x3D;json.Marshal(user)</span><br><span class="line">	fmt.Println(user,data)</span><br><span class="line">	context.JSON(200,gin.H&#123;</span><br><span class="line">		&quot;status&quot;:200,</span><br><span class="line">		&quot;success&quot;:true,</span><br><span class="line">		&quot;data&quot;:string(data),</span><br><span class="line">	&#125;)</span><br><span class="line">	&#x2F;&#x2F;context.Redirect(http.StatusMovedPermanently,&quot;https:&#x2F;&#x2F;github.com&#x2F;gin-goinc&#x2F;gin&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h1 id="时序图"><a href="#时序图" class="headerlink" title="时序图"></a>时序图</h1><p><img src="https://jxdw.github.io/img/program/go/ginsourcev1.png"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://jxdw.github.io/2019/03/04/percona-server-for-mysql-8-0-install/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/favicon.png">
      <meta itemprop="name" content="渐学顿悟">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="渐学顿悟">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/03/04/percona-server-for-mysql-8-0-install/" class="post-title-link" itemprop="url">【mysql知识体系】Percona Server8.0安装和初步使用</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-03-04 10:43:32 10:43:32" itemprop="dateCreated datePublished" datetime="2019-03-04T10:43:32+08:00">2019-03-04 10:43:32</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2020-10-10 23:11:26 23:11:26" itemprop="dateModified" datetime="2020-10-10T23:11:26+08:00">2020-10-10 23:11:26</time>
      </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2019/03/04/percona-server-for-mysql-8-0-install/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2019/03/04/percona-server-for-mysql-8-0-install/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="本文参考资料"><a href="#本文参考资料" class="headerlink" title="本文参考资料"></a>本文参考资料</h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">https:&#x2F;&#x2F;blog.csdn.net&#x2F;vkingnew&#x2F;article&#x2F;details&#x2F;85220187</span><br><span class="line">https:&#x2F;&#x2F;www.mayi888.com&#x2F;archives&#x2F;59253</span><br><span class="line">https:&#x2F;&#x2F;www.percona.com&#x2F;doc&#x2F;percona-server&#x2F;LATEST&#x2F;installation&#x2F;yum_repo.html</span><br><span class="line">https:&#x2F;&#x2F;blog.csdn.net&#x2F;myNameIssls&#x2F;article&#x2F;details&#x2F;84031426</span><br></pre></td></tr></table></figure>

<h1 id="安装过程"><a href="#安装过程" class="headerlink" title="安装过程"></a>安装过程</h1><p>参考 <a href="https://jxdw.github.io/2017/06/21/mysql5-7-install/">https://jxdw.github.io/2017/06/21/mysql5-7-install/</a> ，安装软件。</p>
<h2 id="安装需要的软件"><a href="#安装需要的软件" class="headerlink" title="安装需要的软件"></a>安装需要的软件</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">wget https:&#x2F;&#x2F;repo.percona.com&#x2F;release&#x2F;7Server&#x2F;RPMS&#x2F;x86_64&#x2F;jemalloc-3.6.0-1.el7.x86_64.rpm</span><br><span class="line">rpm -ivh jemalloc-3.6.0-1.el7.x86_64.rpm</span><br></pre></td></tr></table></figure>

<h2 id="删除废弃的软件包"><a href="#删除废弃的软件包" class="headerlink" title="删除废弃的软件包"></a>删除废弃的软件包</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">rpm -e --nodeps  mariadb-libs</span><br></pre></td></tr></table></figure>

<h2 id="按照需要的软件："><a href="#按照需要的软件：" class="headerlink" title="按照需要的软件："></a>按照需要的软件：</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">yum -y install net-tools libaio perl openssl openssl-devel perl-Data-Dumper  perl-JSON</span><br><span class="line">wget https:&#x2F;&#x2F;www.percona.com&#x2F;downloads&#x2F;Percona-Server-8.0&#x2F;Percona-Server-8.0.13-3&#x2F;binary&#x2F;redhat&#x2F;7&#x2F;x86_64&#x2F;Percona-Server-8.0.13-3-ra920dd6-el7-x86_64-bundle.tar</span><br></pre></td></tr></table></figure>

<h2 id="解压，查看软件包列表："><a href="#解压，查看软件包列表：" class="headerlink" title="解压，查看软件包列表："></a>解压，查看软件包列表：</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ll percona*.rpm</span><br></pre></td></tr></table></figure>
<h2 id="安装过程："><a href="#安装过程：" class="headerlink" title="安装过程："></a>安装过程：</h2><p>rpm -ivh percona-*.rpm</p>
<h2 id="创建目录"><a href="#创建目录" class="headerlink" title="创建目录"></a>创建目录</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mkdir -p &#x2F;data&#x2F;mysql&#x2F;&#123;log,binlogs,run,data&#125;</span><br><span class="line">touch &#x2F;data&#x2F;mysql&#x2F;run&#x2F;mysqld.pid</span><br><span class="line">chown -R mysql:mysql &#x2F;data&#x2F;mysql</span><br></pre></td></tr></table></figure>
<h2 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mysqld --initialize-insecure --user&#x3D;mysql --basedir&#x3D;&#x2F;data&#x2F;mysql --datadir&#x3D;&#x2F;data&#x2F;mysql&#x2F;data</span><br></pre></td></tr></table></figure>

<h2 id="配置文件-etc-my-cnf"><a href="#配置文件-etc-my-cnf" class="headerlink" title="配置文件/etc/my.cnf"></a>配置文件/etc/my.cnf</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># Percona Server template configuration</span><br><span class="line">#</span><br><span class="line"># For advice on how to change settings please see</span><br><span class="line"># http:&#x2F;&#x2F;dev.mysql.com&#x2F;doc&#x2F;refman&#x2F;8.0&#x2F;en&#x2F;server-configuration-defaults.html</span><br><span class="line"></span><br><span class="line">[mysqld]</span><br><span class="line">#</span><br><span class="line"># Remove leading # and set to the amount of RAM for the most important data</span><br><span class="line"># cache in MySQL. Start at 70% of total RAM for dedicated server, else 10%.</span><br><span class="line"># innodb_buffer_pool_size &#x3D; 128M</span><br><span class="line">#</span><br><span class="line"># Remove the leading &quot;# &quot; to disable binary logging</span><br><span class="line"># Binary logging captures changes between backups and is enabled by</span><br><span class="line"># default. It&#39;s default setting is log_bin&#x3D;binlog</span><br><span class="line"># disable_log_bin</span><br><span class="line">#</span><br><span class="line"># Remove leading # to set options mainly useful for reporting servers.</span><br><span class="line"># The server defaults are faster for transactions and fast SELECTs.</span><br><span class="line"># Adjust sizes as needed, experiment to find the optimal values.</span><br><span class="line"># join_buffer_size &#x3D; 128M</span><br><span class="line"># sort_buffer_size &#x3D; 2M</span><br><span class="line"># read_rnd_buffer_size &#x3D; 2M</span><br><span class="line">#</span><br><span class="line"># Remove leading # to revert to previous value for default_authentication_plugin,</span><br><span class="line"># this will increase compatibility with older clients. For background, see:</span><br><span class="line"># https:&#x2F;&#x2F;dev.mysql.com&#x2F;doc&#x2F;refman&#x2F;8.0&#x2F;en&#x2F;server-system-variables.html#sysvar_default_authentication_plugin</span><br><span class="line"># default-authentication-plugin&#x3D;mysql_native_password</span><br><span class="line">port &#x3D; 3306</span><br><span class="line">#basedir &#x3D; &#x2F;data&#x2F;mysql这里注释掉，如果不注释掉，percona会报错：</span><br><span class="line">datadir &#x3D; &#x2F;data&#x2F;mysql&#x2F;data</span><br><span class="line">socket &#x3D; &#x2F;data&#x2F;mysql&#x2F;mysql.sock</span><br><span class="line">log-error &#x3D; &#x2F;data&#x2F;mysql&#x2F;log&#x2F;mysqld.log</span><br><span class="line">pid-file &#x3D; &#x2F;data&#x2F;mysql&#x2F;run&#x2F;mysqld.pid</span><br><span class="line">log-bin &#x3D; &#x2F;data&#x2F;mysql&#x2F;binlogs&#x2F;mysql-bin</span><br><span class="line">slow_query_log &#x3D; 1</span><br><span class="line">slow_query_log_file &#x3D; &#x2F;data&#x2F;mysql&#x2F;log&#x2F;mysql_slow_query.log</span><br><span class="line">long_query_time &#x3D; 5</span><br><span class="line">symbolic-links&#x3D;0</span><br><span class="line">character_set_server&#x3D;utf8mb4</span><br><span class="line">collation_server&#x3D;utf8mb4_unicode_ci</span><br><span class="line">skip-character-set-client-handshake</span><br><span class="line">innodb_undo_log_truncate&#x3D;off</span><br><span class="line">#允许时间字段为&quot;0000-00-00 00:00:00&quot;</span><br><span class="line">sql_mode&#x3D;&#39;STRICT_TRANS_TABLES,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION&#39;</span><br><span class="line">#打开函数功能</span><br><span class="line">log_bin_trust_function_creators&#x3D;1</span><br><span class="line"># general</span><br><span class="line">table_open_cache &#x3D; 200000</span><br><span class="line">table_open_cache_instances&#x3D;64</span><br><span class="line">back_log&#x3D;3500</span><br><span class="line">max_connections&#x3D;110000</span><br><span class="line"># files</span><br><span class="line">innodb_file_per_table</span><br><span class="line">innodb_log_file_size&#x3D;1G</span><br><span class="line">innodb_log_files_in_group&#x3D;2</span><br><span class="line">innodb_open_files&#x3D;4000</span><br><span class="line"># buffers</span><br><span class="line">innodb_buffer_pool_size&#x3D; 2G</span><br><span class="line">innodb_buffer_pool_instances&#x3D;8</span><br><span class="line">innodb_log_buffer_size&#x3D;256M</span><br><span class="line"># tune</span><br><span class="line">innodb_doublewrite&#x3D; 1</span><br><span class="line">innodb_thread_concurrency&#x3D;0</span><br><span class="line">innodb_flush_log_at_trx_commit&#x3D; 0</span><br><span class="line">innodb_flush_method&#x3D;O_DIRECT_NO_FSYNC</span><br><span class="line">innodb_max_dirty_pages_pct&#x3D;90</span><br><span class="line">innodb_max_dirty_pages_pct_lwm&#x3D;10</span><br><span class="line">innodb_lru_scan_depth&#x3D;2048</span><br><span class="line">innodb_page_cleaners&#x3D;4</span><br><span class="line">join_buffer_size&#x3D;256K</span><br><span class="line">sort_buffer_size&#x3D;256K</span><br><span class="line">innodb_use_native_aio&#x3D;1</span><br><span class="line">innodb_stats_persistent &#x3D; 1</span><br><span class="line">innodb_spin_wait_delay&#x3D;96</span><br><span class="line">innodb_adaptive_flushing &#x3D; 1</span><br><span class="line">innodb_flush_neighbors &#x3D; 0</span><br><span class="line">innodb_read_io_threads &#x3D; 16</span><br><span class="line">innodb_write_io_threads &#x3D; 16</span><br><span class="line">innodb_io_capacity&#x3D;1500</span><br><span class="line">innodb_io_capacity_max&#x3D;2500</span><br><span class="line">innodb_purge_threads&#x3D;4</span><br><span class="line">innodb_adaptive_hash_index&#x3D;0</span><br><span class="line">max_prepared_stmt_count&#x3D;1000000</span><br><span class="line">innodb_monitor_enable &#x3D; ‘%’</span><br><span class="line">performance_schema &#x3D; ON</span><br></pre></td></tr></table></figure>

<h2 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h2><p>systemctl start mysqld.service<br>systemctl status mysqld.service</p>
<h2 id="初始化密码和权限"><a href="#初始化密码和权限" class="headerlink" title="初始化密码和权限"></a>初始化密码和权限</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mysql -h 127.0.0.1 -u root</span><br><span class="line">alter user &#39;root&#39;@&#39;localhost&#39; identified with mysql_native_password by &#39;123456&#39;; --查询了资料，percona 8.0的密码插件已变成caching_sha2_password</span><br><span class="line">UPDATE user SET Host &#x3D; &#39;%&#39; WHERE User &#x3D; &#39;root&#39;;</span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure>

<h1 id="体验"><a href="#体验" class="headerlink" title="体验"></a>体验</h1><p><img src="https://jxdw.github.io/img/business/mysql/percona.png"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>





  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/13/">13</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



      

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      const activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      const commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

    </div>
  </main>

  <footer class="footer">
    <div class="footer-inner">
      

      

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">渐学顿悟</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="//cdn.jsdelivr.net/npm/animejs@3.2.0/lib/anime.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  


















  








  

  

<script>
NexT.utils.loadComments('#valine-comments', () => {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js', () => {
    new Valine(Object.assign({"enable":true,"appId":"wrre3Nrx21CqKiChLnKn034M-gzGzoHsz","appKey":"rkWWNONo7LAJhlS936vnywQ9","serverURLs":null,"placeholder":"Just go go","avatar":"mm","meta":["nick","mail","link"],"pageSize":10,"lang":null,"visitor":false,"comment_count":true,"recordIP":false,"enableQQ":false,"requiredFields":[]}, {
      el: '#valine-comments',
      path: "/page/3/",
      serverURLs: "https://wrre3nrx.api.lncldglobal.com"
    }));
  }, window.Valine);
});
</script>

</body>
</html>
